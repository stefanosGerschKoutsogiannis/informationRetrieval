2017,A Decomposition of Forecast Error in Prediction Markets,We analyze sources of error in prediction market forecasts in order to bound the difference between a security's price and the ground truth it estimates. We consider cost-function-based prediction markets in which an automated market maker adjusts security prices according to the history of trade. We decompose the forecasting error into three components: sampling error  arising because traders only possess noisy estimates of ground truth; market-maker bias  resulting from the use of a particular market maker (i.e.  cost function) to facilitate trade; and convergence error  arising because  at any point in time  market prices may still be in flux. Our goal is to make explicit the tradeoffs between these error components  influenced by design decisions such as the functional form of the cost function and the amount of liquidity in the market. We consider a specific model in which traders have exponential utility and exponential-family beliefs representing noisy estimates of ground truth. In this setting  sampling error vanishes as the number of traders grows  but there is a tradeoff between the other two components. We provide both upper and lower bounds on market-maker bias and convergence error  and demonstrate via numerical simulations that these bounds are tight. Our results yield new insights into the question of how to set the market's liquidity parameter and into the forecasting benefits of enforcing coherent prices across securities.,A Decomposition of Forecast Error in

Prediction Markets

Miroslav Dudík

Microsoft Research  New York  NY

mdudik@microsoft.com

Ryan Rogers

University of Pennsylvania  Philadelphia  PA

rrogers386@gmail.com

Sébastien Lahaie

Google  New York  NY
slahaie@google.com

Jennifer Wortman Vaughan

Microsoft Research  New York  NY

jenn@microsoft.com

Abstract

We analyze sources of error in prediction market forecasts in order to bound
the difference between a security’s price and the ground truth it estimates. We
consider cost-function-based prediction markets in which an automated market
maker adjusts security prices according to the history of trade. We decompose the
forecasting error into three components: sampling error  arising because traders
only possess noisy estimates of ground truth; market-maker bias  resulting from
the use of a particular market maker (i.e.  cost function) to facilitate trade; and
convergence error  arising because  at any point in time  market prices may still be
in ﬂux. Our goal is to make explicit the tradeoffs between these error components 
inﬂuenced by design decisions such as the functional form of the cost function
and the amount of liquidity in the market. We consider a speciﬁc model in which
traders have exponential utility and exponential-family beliefs representing noisy
estimates of ground truth. In this setting  sampling error vanishes as the number
of traders grows  but there is a tradeoff between the other two components. We
provide both upper and lower bounds on market-maker bias and convergence error 
and demonstrate via numerical simulations that these bounds are tight. Our results
yield new insights into the question of how to set the market’s liquidity parameter
and into the forecasting beneﬁts of enforcing coherent prices across securities.

1

Introduction

A prediction market is a marketplace in which participants can trade securities with payoffs that
depend on the outcomes of future events [19]. Consider the simple setting in which we are interested
in predicting the outcome of a political election: whether the incumbent or challenger will win.
A prediction market might issue a security that pays out $1 per share if the incumbent wins  and
$0 otherwise. The market price p of this security should always lie between 0 and 1  and can be
construed as an event probability. If a trader believes that the likelihood of the incumbent winning is
greater than p  she will buy shares with the expectation of making a proﬁt. Market prices increase
when there is more interest in buying and decrease when there is more interest in selling. By this
process  the market aggregates traders’ information into a consensus forecast  represented by the
market price. With sufﬁcient activity  prediction markets are competitive with alternative forecasting
methods such as polls [4]  but while there is a mature literature on sources of error and bias in polls 
the impact of prediction market structure on forecast accuracy is still an active area of research [17].
We consider prediction markets in which all trades occur through a centralized entity known as a
market maker. Under this market structure  security prices are dictated by a ﬁxed cost function and

31st Conference on Neural Information Processing Systems (NIPS 2017)  Long Beach  CA  USA.

the current number of outstanding shares [6]. The basic conditions that a cost function should satisfy
to correctly elicit beliefs  while bounding the market maker’s loss  are now well-understood  chief
among them being convexity [1]. Nonetheless  the class of allowable cost functions remains broad 
and the literature so far provides little formal guidance on the speciﬁc form of cost function to use in
order to achieve good forecast accuracy  including how to set the liquidity parameter which controls
price responsiveness to trade. In practice  the impact of the liquidity parameter is difﬁcult to quantify
a priori  so implementations typically resort to calibrations based on market simulations [8  18].
Prior work also suggests that maintaining coherence among prices of logically related securities has
informational advantages [8]  but there has been little work aimed at understanding why.
This paper provides a framework to quantify the impact of the choice of cost function on forecast
accuracy. We introduce a decomposition of forecast error  in analogy with the bias-variance decom-
position familiar from statistics or the approximation-estimation-optimization decomposition for
large-scale machine learning [5]. Our decomposition consists of three components. First  there is the
sampling error resulting from the fact that the market consists of a ﬁnite population of traders  each
holding a noisy estimate of ground truth. Second  there is a market-maker bias which stems from the
use of a cost function to provide liquidity and induce trade. Third  there is convergence error due to
the fact that the market prices may not have fully converged to their equilibrium point.
The central contribution of this paper is a theoretical characterization of the market-maker bias and
convergence error  the two components of this decomposition that depend on market structure as
deﬁned by the form of the cost function and level of liquidity. We consider a tractable model of agent
behavior  originally studied by Abernethy et al. [2]  in which traders have exponential utility functions
and beliefs drawn from an exponential family. Under this model it is possible to characterize
the market’s equilibrium prices in terms of the traders’ belief and risk aversion parameters  and
thereby quantify the discrepancy between current market prices and ground truth. To analyze market
convergence  we consider the trader dynamics introduced by Frongillo and Reid [9]  under which
trading can be viewed as randomized block-coordinate descent on a suitable potential function.
Our analysis is local in that the bounds depend on the market equilibrium prices. This allows us to
exactly identify the main asymptotic terms of error. We demonstrate via numerical experiments that
these asymptotic bounds are accurate early on and therefore can be used to compare market designs.
We make the following speciﬁc contributions:
1. We precisely deﬁne the three components of the forecasting error.
2. We show that the market-maker bias equals cb ± O(b2) as b → 0  where b is the liquidity

parameter  and c is an explicit constant that depends on the cost function and trader beliefs.

3. We show that the convergence error decreases with the number of trades t as γt with γ = 1−Θ(b).
We provide explicit upper and lower bounds on γ that depend on the cost function and trader
beliefs. In the process  we prove a new local convergence bound for block-coordinate descent.
4. We use our explicit formulas for bias and convergence error to compare two common cost
functions: independent markets (IND)  under which security prices vary independently  and
the logarithmic market scoring rule (LMSR) [10]  which enforces logical relationships between
security prices. We show that at the same value of the market-maker bias  IND requires at least
half-as-many and at most twice-as-many trades as LMSR to achieve the same convergence error.
We consider a speciﬁc utility model (exponential utility)  but our bias and convergence analysis
immediately carry over if we assume that each trader is optimizing a risk measure (rather than an
exponential utility function) similar to the setup of Frongillo and Reid [9]. Exponential utility was
chosen because it was previously well studied and allowed us to focus on the analysis of the cost
function and liquidity. The role of the liquidity parameter in trading off the bias and convergence error
has been informally recognized in the literature [7  10  13]  but our precise deﬁnition of market-maker
bias and explicit formulas for the bias and convergence error are novel. Abernethy et al. [2] provide
results that can be used to derive the bias for LMSR  but not for generic cost functions  so they do not
enable comparison of biases of different costs. Frongillo and Reid [9] observe that the convergence
error can be locally bounded as γt  but they only provide an upper bound and do not show how γ
is related to the liquidity or cost function. Our analysis establishes both upper and lower bounds
on convergence and relates γ explicitly to the liquidity and cost function. This is necessary for a

2

meaningful comparison of cost function families. Thus our framework provides the ﬁrst meaningful
way to compare the error tradeoffs inherent in different choices of cost functions and liquidity levels.

2 Preliminaries
We use the notation [N ] to denote the set {1  . . .   N}. Given a convex function f : Rd → R ∪ {∞} 
its effective domain  denoted dom f  is the set of points where f is ﬁnite. Whenever dom f is
u − f (u)]. We
non-empty  the conjugate f∗ : Rd → R ∪ {∞} is deﬁned by f∗(v) := supu∈Rd [v
write (cid:107)·(cid:107) for the Euclidean norm. A centralized mathematical reference is provided in Appendix A.1

(cid:124)

Cost-function-based market makers We study cost-function-based prediction markets [1]. Let
Ω be a ﬁnite set of mutually exclusive and exhaustive states of the world. A market administrator 
known as market maker  wishes to elicit information about the likelihood of various states ω ∈ Ω 
and to that end offers to buy and sell any number of shares of K securities. Securities are associated
with coordinates of a payoff function φ : Ω → RK  where each share of the kth security is worth
φk(ω) in the event that the true state of the world is ω ∈ Ω. Traders arrive in the market sequentially
and trade with the market maker. The market price is fully determined by a convex potential function
C called the cost function. In particular  if the market maker has previously sold sk ∈ R shares of
each security k and a trader would like to purchase a bundle consisting of δk ∈ R shares of each  the
trader is charged C(s + δδδ) − C(s). The instantaneous price of security k is then ∂C(s)/∂sk. Note
that negative values of δk are allowed and correspond to the trader (short) selling security k.
Let M := conv{φ(ω) : ω ∈ Ω} be the convex hull of the set of payoff vectors. It is exactly the set
of expectations E [φ(ω)] across all possible probability distributions over Ω  which we call beliefs.
We refer to elements of M as coherent prices. Abernethy et al. [1] characterize the conditions that a
cost function must satisfy in order to guarantee important properties such as bounded loss for the
market maker and no possibility of arbitrage. To start  we assume only that C : RK → R is convex
and differentiable and that M ⊆ dom C∗  which corresponds to the bounded loss property.
Example 2.1 (Logarithmic Market Scoring Rule: LMSR [10]). Consider a complete market with a
single security for each outcome worth $1 if that outcome occurs and $0 otherwise  i.e.  Ω = [K] and
φk(ω) = 1{k = ω} for all k. The LMSR cost function and instantaneous security prices are given by

∂C(s)

  ∀k ∈ [K].

=

and

k=1 esk

C(s) = log

Its conjugate is the entropy function  C∗(µ) = (cid:80)

(1)
∂sk
k µk log µk + I{µ ∈ ∆K}  where ∆K is the
simplex in RK and I{·} is the convex indicator  equal to zero if its argument is true and inﬁnity if
false. Thus  in this case M = ∆K = dom C∗.
Notice that the LMSR security prices are coherent because they always sum to one. This prevents
arbitrage opportunities for traders. Our second running example does not have this property.
Example 2.2 (Sum of Independent LMSRs: IND). Let Ω = [K] and φk(ω) = 1{k = ω} for all k.
The cost function and instantaneous security prices for the sum of independent LMSRs are given by

(cid:96)=1 es(cid:96)

(cid:16)(cid:80)K

(cid:17)

esk(cid:80)K

C(s) =(cid:80)K

esk

∂C(s)

C∗(µ) =(cid:80)

=

and

k=1 log (1 + esk )

(2)
k[µk log µk+(1−µk) log(1−µk)]+I{µ ∈ [0  1]K}  M = ∆K  and dom C∗ = [0  1]K.
When choosing a cost function  one important consideration is liquidity  that is  how quickly prices
change in response to trades. Any cost function C can be viewed as a member of a parametric family
of cost functions of the form Cb(s) := bC(s/b) across all b > 0. With larger values of b  larger trades
are required to move market prices by some ﬁxed amount  and the worst-case loss of the market
maker is larger; with smaller values  small purchases can result in big changes to the market price.

1 + esk

∂sk

  ∀k ∈ [K] 

Basic model
In our analysis of error we assume that there exists an unknown true probability
distribution ptrue ∈ ∆|Ω| over the outcome set Ω. The true expected payoffs of the K market
securities are then given by the vector µtrue := Eω∼ptrue [φ(ω)].

1A longer version of this paper containing the appendix is available on arXiv and the authors’ websites.

3

We assume that there are N traders and that each trader i ∈ [N ] has a private belief ˜pi over
outcomes. We additionally assume that each trader i has a utility function ui : R → R for wealth
and would like to maximize expected utility subject to her beliefs. For now we assume that ui
is differentiable and concave  meaning that each trader is risk averse  though later we focus on
exponential utility. The expected utility of trader i owning a security bundle ri ∈ RK and cash ci is
Ui(ri  ci) := Eω∼˜pi
is without loss of generality because we could incorporate any initial cash holdings into ui.

(cid:1)(cid:3) . We assume that each trader begins with zero cash. This

(cid:0)ci + φ(ω) · ri

(cid:2)ui

3 A Decomposition of Error

In this section  we decompose the market’s forecast error into three major components. The ﬁrst is
sampling error  which arises because traders have only noisy observations of the ground truth. The
second is market-maker bias  which arises because the shape of the cost function impacts the traders’
willingness to invest. Finally  convergence error arises due to the fact that at any particular point in
time the market prices may not have fully converged. To formalize our decomposition  we introduce
two new notions of equilibrium.
Our ﬁrst notion of equilibrium  called a market-clearing equilibrium  does not assume the existence
of a market maker  but rather assumes that traders trade only among themselves  and so no additional
securities or cash are available beyond the traders’ initial allocations. This equilibrium is described by
security prices ¯µ ∈ RK and allocations (¯ri  ¯ci) of security bundles and cash to each trader i such that 
given her allocation  no trader wants to buy or sell any bundle of securities at those prices. Trader
bundles and cash are summarized as ¯r = (¯ri)i∈[N ] and ¯c = (¯ci)i∈[N ].
Deﬁnition 3.1 (Market-clearing equilibrium). A triple (¯r  ¯c  ¯µ) is a market-clearing equilibrium if
i=1 ¯ci = 0  and for all i ∈ [N ]  0 ∈ argmaxδ∈RK Ui(¯ri + δ  ¯ci − δ · ¯µ). We call
¯µ market-clearing prices if there exist ¯r and ¯c such that (¯r  ¯c  ¯µ) is a market-clearing equilibrium.
Similarly  we call ¯r a market-clearing allocation if there exists a corresponding equilibrium.

(cid:80)N
i=1 ¯ri = 0 (cid:80)N
The requirements on(cid:80)N

i=1 ¯ci guarantee that no additional securities or cash have
been created. In other words  there exists some set of trades among traders that would lead to the
market-clearing allocation  although the deﬁnition says nothing about how the equilibrium is reached.
Since we rely on a market maker to orchestrate trade  our markets generally do not reach the market-
clearing equilibrium. Instead  we introduce the notion of market-maker equilibrium. This equilibrium
is again described by a set of security prices µ(cid:63) and trader allocations (r(cid:63)
i )  summarized as
(r(cid:63)  c(cid:63))  such that no trader wants to trade at these prices given her allocation. The difference is that
we now require r(cid:63) and c(cid:63) to be reachable via some sequence of trade with the market maker instead
of via trade among only the traders  and µ(cid:63) must be the market prices after such a sequence of trade.
Deﬁnition 3.2 (Market-maker equilibrium). A triple (r(cid:63)  c(cid:63)  µ(cid:63)) is a market-maker equilibrium
i = Cb(0) − Cb(s(cid:63)) 
µ(cid:63) = ∇Cb(s(cid:63))  and for all i ∈ [N ]  0 ∈ argmaxδ∈RK Ui
call µ(cid:63) market-maker equilibrium prices if there exist r(cid:63) and c(cid:63) such that (r(cid:63)  c(cid:63)  µ(cid:63)) is a market-
maker equilibrium. Similarly  we call r(cid:63) a market-maker equilibrium allocation if there exists a
corresponding equilibrium. We sometimes write µ(cid:63)(b; C) to show the dependence of µ(cid:63) on C and b.

for cost function Cb if  for the market state s(cid:63) =(cid:80)N

i − Cb(s(cid:63) + δ) + Cb(s(cid:63))(cid:1). We

i=1 r(cid:63)

i   we have(cid:80)N
(cid:0)r(cid:63)

i + δ  c(cid:63)

i=1 c(cid:63)

i   c(cid:63)

i=1 ¯ri and(cid:80)N

The market-clearing prices ¯µ and the market-maker equilibrium prices µ(cid:63)(b; C) are not unique in
general  but are unique for the speciﬁc utility functions that we study in this paper.
Using these notions of equilibrium  we can formally deﬁne our error components. Sampling error is
the difference between the true security values and the market-clearing equilibrium prices. The bias
is the difference between the market-clearing equilibrium prices and the market-maker equilibrium
prices. Finally  the convergence error is the difference between the market-maker equilibrium prices
and the market prices µt(b; C) at a particular round t. Putting this together  we have that

µtrue − µt(b; C) = µtrue − ¯µ

+ ¯µ − µ(cid:63)(b; C)

+ µ(cid:63)(b; C) − µt(b; C)

.

(3)

(cid:124)

(cid:123)(cid:122)

(cid:125)

Sampling Error

(cid:123)(cid:122)

Bias

(cid:125)

(cid:124)

(cid:123)(cid:122)

(cid:125)

Convergence Error

(cid:124)

4

4 The Exponential Trader Model

For the remainder of the paper  we work with the exponential trader model introduced by Abernethy
et al. [2] in which traders have exponential utility functions and exponential-family beliefs. Under
this model  both the market-clearing prices and market-maker equilibrium prices are unique and can
be expressed cleanly in terms of potential functions [9]  yielding a tractable analysis. The results of
this section are immediate consequences of prior work [2  9]  but our equilibrium concepts bring
them into a common framework.
We consider a speciﬁc exponential family [3] of probability distributions over Ω deﬁned as p(ω; θ) =
eφ(ω)·θ−T (θ)  where θ ∈ RK is the natural parameter of the distribution  and T is the log partition
under p(·; θ)  and dom T ∗ = conv{φ(ω) : ω ∈ Ω} = M.
Following Abernethy et al. [2]  we assume that each trader i has exponential-family beliefs with
natural parameter ˜θi. From the perspective of trader i  the expected payoffs of the K market securities

function  T (θ) := log(cid:0)(cid:80)
can then be expressed as the vector ˜µi with ˜µi k :=(cid:80)

ω∈Ω eφ(ω)·θ(cid:1). The gradient ∇T (θ) coincides with the expectation of φ

ω∈Ω φk(ω)p(ω; ˜θi).

As in Abernethy et al. [2]  we also assume that traders are risk averse with exponential utility for
wealth  so the utility of trader i for wealth W is ui(W ) = −(1/ai)e−aiW   where ai is the the trader’s
risk aversion coefﬁcient. We assume that the traders’ risk aversion coefﬁcients are ﬁxed.
Using the deﬁnitions of the expected utility Ui  the exponential family distribution p(·; ˜θi)  the log
partition function T   and the exponential utility ui  it is straightforward to show [2] that

Ui(ri  ci) = − 1
ai

ω∈Ω eφ(ω)·( ˜θi−airi) = − 1
ai

eT ( ˜θi−airi)−T ( ˜θi)−aici.

(4)

e−T ( ˜θi)−aici(cid:80)

of traders’ utilities is also locally maximized  as is(cid:80)N
conditions require that(cid:80)N
equilibrium must be a local minimum of(cid:80)N

Under this trader model  we can use the techniques of Frongillo and Reid [9] to construct potential
functions which yield alternative characterizations of the equilibria as solutions of minimization
T ( ˜θi + ais) for each
problems. Consider ﬁrst a market-clearing equilibrium. Deﬁne Fi(s) := 1
trader i. From Eq. (4) we can observe that −Fi(−ri) + ci is a monotone transformation of trader i’s
ai
utility. Since each trader’s utility is locally maximized at a market-clearing equilibrium  the sum
i=1(−Fi(−ri) + ci). Since the equilibrium
i=1 ci = 0  the security allocation associated with any market-clearing
i=1 Fi(−ri). This idea is formalized in the following
theorem. The proof follows from an analysis of the KKT conditions of the equilibrium. (See the
appendix for all omitted proofs.)
Theorem 4.1. Under the exponential trader model  a market-clearing equilibrium always exists and
market-clearing prices are unique. Market-clearing allocations and prices are exactly the solutions
of the following optimization problems:

(cid:104)(cid:80)N

(cid:105)

¯r ∈ argmin

r:(cid:80)N

i=1 ri=0

i=1 Fi(−ri)

 

rium is a local minimum of the function F (r) :=(cid:80)N

(cid:104)(cid:80)N
(cid:0)(cid:80)N

(cid:105)

(cid:1).
(cid:105)

¯µ = argmin
µ∈RK

i=1 F ∗

i (µ)

.

(5)

Using a similar argument  we can show that the allocation associated with any market-maker equilib-

i=1 Fi(−ri) + Cb

i=1 ri

Theorem 4.2. Under the exponential trader model  a market-maker equilibrium always exists and
equilibrium prices are unique. Market-maker equilibrium allocations and prices are exactly the
solutions of the following optimization problems:

r(cid:63) ∈ argmin

F (r)  

r

µ(cid:63) = argmin
µ∈RK

i=1 F ∗

i (µ) + bC∗(µ)

.

(6)

(cid:104)(cid:80)N

can be written as ¯µ = E¯θ [φ(ω)]  where ¯θ := (cid:0)(cid:80)N

Sampling error We ﬁnish this section with an analysis of the ﬁrst component of error identiﬁed in
Section 3: the sampling error. We begin by deriving a more explicit form of market-clearing prices:
Theorem 4.3. Under the exponential trader model  the unique market-clearing equilibrium prices
˜θi/ai
weighted average belief and E¯θ is the expectation under p(·; ¯θ).

(cid:1) is the risk-aversion-

(cid:1)/(cid:0)(cid:80)N

i=1 1/ai

i=1

5

The sampling error arises because the beliefs ˜θi are only noisy signals of the ground truth. From
Theorem 4.3 we see that this error may be compounded by the weighting according to risk aversions 
which can skew the prices. To obtain a concrete bound on the error term (cid:107)µtrue− ¯µ(cid:107)  we need to make
some assumptions about risk aversion coefﬁcients  the true distribution of the outcome  and how this
distribution is related to trader beliefs. For instance  suppose risk aversion coefﬁcients are bounded
both from below and above  the true outcome is drawn from an exponential-family distribution with
natural parameter θtrue  and the beliefs ˜θi are independent samples with mean θtrue and a bounded
covariance matrix. Under these assumptions  one can show using standard concentration bounds

that with high probability  (cid:107)µtrue − ¯µ(cid:107) = O((cid:112)1/N ) as N → ∞. In other words  market-clearing

prices approach the ground truth as the number of traders increases. In Appendix B.4 we make
the dependence on risk aversion and belief noise more explicit. The analysis of other information
structures (e.g.  biased or correlated beliefs) is beyond the scope of this paper; instead  we focus on
the two error components that depend on the market design.

5 Market-maker Bias

i are strongly convex on M (from properties of the log partition function).

We now analyze the market-maker bias—the difference between the marker-maker equilibrium prices
µ(cid:63) and market-clearing prices ¯µ. We ﬁrst state a global bound that depends on the liquidity b and cost
function C  but not on trader beliefs  and show that µ(cid:63) → ¯µ with the rate O(b) as b → 0. The proof
builds on Theorems 4.1 and 4.2 and uses the facts that C∗ is bounded on M (by our assumptions on
C)  and conjugates F ∗
Theorem 5.1 (Global Bias Bound). Under the exponential trader model  for any C  there exists a
constant c such that (cid:107)µ(cid:63)(b; C) − ¯µ(cid:107) ≤ cb for all b ≥ 0.
This result makes use of strong convexity constants that are valid over the entire set M  which can
be overly conservative when µ(cid:63) is close to ¯µ. Furthermore  it gives us only an upper bound  which
cannot be used to compare different cost function families. In the rest of this section we pursue
a tighter local analysis  based on the properties of F ∗
i and C∗ at ¯µ. Our local analysis requires
assumptions that go beyond convexity and differentiability of the cost function. We call the class of
functions that satisfy these assumptions convex+ functions. (See Appendix A.3 for their complete
treatment and a more general deﬁnition than provided here.) These functions are related to functions
of Legendre type (see Sec. 26 of Rockafellar [15]). Informally  they are smooth functions that are
strictly convex along directions in a certain space (the gradient space) and linear in orthogonal
directions. For cost functions  strict convexity means that prices change in response to arbitrarily
small trades  while the linear directions correspond to bundles with constant payoffs  whose prices
are therefore ﬁxed.
Deﬁnition 5.2. Let f : Rd → R be differentiable and convex. Its gradient space is the linear space
parallel to the afﬁne hull of its gradients  denoted as G(f ) := span{∇f (u) − ∇f (u(cid:48)) : u  u(cid:48)∈ Rd}.
Deﬁnition 5.3. We say that a convex function f : Rd → R is convex+ if it has continuous third
derivatives and range(∇2f (u)) = G(f ) for all u ∈ Rd.
It can be checked that if P is a projection on G(f ) then there exists some a such that f (u) =
u  so f is up to a linear term fully described by its values on G(f ). The condition on
(cid:124)
f (P u) + a
the range of the Hessian ensures that f is strictly convex over G(f )  so its gradient map is invertible
over G(f ). This means that the Hessian can be expressed as a function of the gradient  i.e.  there
exists a matrix-valued function Hf such that ∇2f (u) = Hf (∇f (u)) (see Proposition A.8). The cost
functions C for both the LMSR and the sum of independent LMSRs (IND) are convex+.
Example 5.4 (LMSR as a convex+ function). For LMSR  the gradient space of C is parallel to
the simplex: G(C) = {u : 1
u = 0}. The gradients of C are points in the relative interior of
the simplex. Given such a point µ = ∇C(s)  the corresponding Hessian is ∇2C(s) = HC(µ) =
(diagk∈[K] µk) − µµ
(cid:124)  where diagk∈[K] µk denotes the diagonal matrix with values µk on the
diagonal. The null space of HC(µ) is {c1 : c ∈ R}  so C is linear in the all-ones direction (buying
one share of each security always has cost one)  but strictly convex in directions from G(C).
Example 5.5 (IND as a convex+ function). For IND  the gradient space is RK and the gradients are
the points in (0  1)K. In this case  HC(µ) = diagk[µk(1 − µk)]. This matrix has full rank.
Our next theorem shows that for an appropriate vector u  which depends on ¯µ and C  we have
µ(cid:63)(b; C) = ¯µ + bu + εb  where (cid:107)εb(cid:107) = O(b2). Here  the O(·) is taken as b → 0  so the error term

(cid:124)

6

εb goes to zero faster than the term bu  which we call the asymptotic bias. Our analysis is local in
the sense that the constants hiding within O(·) may depend on ¯µ. This analysis fully uncovers the
main asymptotic term and therefore allows comparison of cost families. In our experiments  we show
that the asymptotic bias is an accurate estimate of the bias even for moderately large values of b.
Theorem 5.6 (Local Bias Bound). Assume that the cost function C is convex+. Then
µ(cid:63)(b; C) = ¯µ − b(¯a/N )HT ( ¯µ)∂C∗( ¯µ) + εb   where (cid:107)εb(cid:107) = O(b2).

In the expression above  ¯a = N/((cid:80)N

i=1 1/ai) is the harmonic mean of risk-aversion coefﬁcients and

HT ( ¯µ)∂C∗( ¯µ) is guaranteed to consist of a single point even when ∂C∗( ¯µ) is a set.
The theorem is proved by a careful application of Taylor’s Theorem and crucially uses properties of
conjugates of convex+ functions  which we derive in Appendix A.3. It gives us a formula to calculate
the asymptotic bias for any cost function for a particular value of ¯µ  or evaluate the worst-case bias
against some set of possible market-clearing prices. It also constitutes an important step in comparing
cost function families. To compare the convergence error of two costs C and C(cid:48) in the next section 
we require that their liquidities b and b(cid:48) be set so that they have (approximately) the same bias  i.e. 
(cid:107)µ(cid:63)(b(cid:48); C(cid:48)) − ¯µ(cid:107) ≈ (cid:107)µ(cid:63)(b; C) − ¯µ(cid:107). Theorem 5.6 tells us that this can be achieved by the linear
rule b(cid:48) = b/η where η = (cid:107)HT ( ¯µ)∂C(cid:48)∗
( ¯µ)(cid:107) /(cid:107)HT ( ¯µ)∂C∗( ¯µ)(cid:107). For C = LMSR and C(cid:48) = IND  we
prove that the corresponding η ∈ [1  2]. Equivalently  this means that for the same value of b the
asymptotic bias of IND is at least as large as that of LMSR  but no more than twice as large:
Theorem 5.7. For any ¯µ there exists η ∈ [1  2] such that for all b  (cid:107)µ(cid:63)(b/η; IND) − ¯µ(cid:107) =
(cid:107)µ(cid:63)(b; LMSR)− ¯µ(cid:107)±O(b2). For this same η  also (cid:107)µ(cid:63)(b; IND)− ¯µ(cid:107) = η(cid:107)µ(cid:63)(b; LMSR)− ¯µ(cid:107)±O(b2).
Theorem 5.6 also captures an intuitive relationship which can guide the market maker in adjusting the
market liquidity b as the number of traders N and their risk aversion coefﬁcients ai vary. In particular 
holding ¯µ and the cost function ﬁxed  we can maintain the same amount of bias by setting b ∝ N/¯a.
Note that 1/ai plays the role of the budget of trader i in the sense that at ﬁxed prices  the trader
i(1/ai) corresponds to the total
amount of available cash among the traders in the market. Similarly  the market maker’s worst-case
i(1/ai) is natural.

will spend an amount of cash proportional to 1/ai. Thus N/¯a =(cid:80)
loss  amounting to the market maker’s cash  is proportional to b  so setting b ∝(cid:80)

6 Convergence Error

We now study the convergence error  namely the difference between the prices µt at round t and the
market-maker equilibrium prices µ(cid:63). To do so  we must posit a model of how the traders interact with
the market. Following Frongillo and Reid [9]  we assume that in each round  a trader i ∈ [N ]  chosen
uniformly at random  buys a bundle δ ∈ RK that optimizes her utility given the current market state s
and her existing security and cash allocations  ri and ci. The resulting updates of the allocation vector
i=1 correspond to randomized block-coordinate descent on the potential function F (r) with
r = (ri)N
blocks ri (see Appendix D.1 and Frongillo and Reid [9]). We refer to this model as the all-security
(trader) dynamics (ASD).2 We apply and extend the analysis of block-coordinate descent to this setting.
We focus on convex+ functions and conduct local convergence analysis around the minimizer of F .
Our experiments demonstrate that the local analysis accurately estimates the convergence rate.
Let r(cid:63) denote an arbitrary minimizer of F and let F (cid:63) be the minimum value of F . Also  let rt denote
the allocation vector and µt the market price vector after the tth trade. Instead of directly analyzing
the convergence error (cid:107)µt − µ(cid:63)(cid:107)  we bound the suboptimality F (rt) − F (cid:63) since (cid:107)µt − µ(cid:63)(cid:107)2 =
Θ(F (rt) − F (cid:63)) for convex+ costs C under ASD (see Appendix D.7.1).
Convex+ functions are locally strongly convex and have a Lipschitz-continuous gradient  so the
standard analysis of block-coordinate descent [9  11] implies linear convergence  i.e.  E [F (rt)] −
F (cid:63) ≤ O(γt) for some γ < 1  where the expectation is under the randomness of the algorithm. We
reﬁne the standard analysis by (1) proving not only upper  but also lower bounds on the convergence
rate  and (2) proving an explicit dependence of γ on the cost function C and the liquidity b. These
two reﬁnements are crucial for comparison of cost families  as we demonstrate with the comparison
of LMSR and IND. We begin by formally deﬁning bounds on local convergence of any randomized
iterative algorithm that minimizes a function F (r) via a sequence of iterates rt.

2In Appendix D  we also analyze the single-security (trader) dynamics (SSD)  in which a randomly chosen

trader randomly picks a single security to trade  corresponding to randomized coordinate descent on F .

7

such that for some c > 0 and all t ≥ t0  E(cid:2)F (rt)(cid:12)(cid:12) rt0(cid:3) − F (cid:63) ≤ cγt−t0

Deﬁnition 6.1. We say that γhigh is an upper bound on the local convergence rate of an algorithm
if  with probability 1 under the randomness of the algorithm  the algorithm reaches an iteration t0
high . We say that γlow is a lower
bound on the local convergence rate if γhigh ≥ γlow holds for all upper bounds γhigh.
To state explicit bounds  we use the notation D := diagi∈[N ] ai and P := IN − 11
(cid:124)
/N  where IN
is the N × N identity matrix and 1 is the all-ones vector. We write M + for the pseudoinverse of a
matrix M and λmin(M ) and λmax(M ) for its smallest and largest positive eigenvalues.
Theorem 6.2 (Local Convergence Bound). Assume that C is convex+. Let HT := HT ( ¯µ) and
HC := HC( ¯µ). For the all-securities dynamics  the local convergence rate is bounded between

high = 1 − 2b
γASD
low = 1 − 2b
γASD

N · λmin(P DP ) · λmin
N · λmax(P DP ) · λmax

(cid:0) H 1/2
(cid:0) H 1/2

T H +
T H +

C H 1/2
C H 1/2

T

T

(cid:1) + O(b2)  
(cid:1) − O(b2) .

In our proof  we ﬁrst establish both lower and upper bounds on convergence of a generic block-
coordinate descent that extend the results of Nesterov [11]. We then analyze the behavior of the
algorithm for the speciﬁc structure of our objective to obtain explicit lower and upper bounds. Our
bounds prove linear convergence with the rate γ = 1 − Θ(b). Since the convergence gets worse as
b → 0  there is a trade-off with the bias  which decreases as b → 0.
Theorems 5.6 and 6.2 enable systematic quantitative comparisons of cost families. For simplicity 
assume that N ≥ 2 and all risk aversions are a  so λmin(P DP ) = λmax(P DP ) = a. To compare
convergence rates of two costs C and C(cid:48)  we need to control for bias. As discussed after Theorem 5.6 
their biases are (asymptotically) equal if their liquidities are linearly related as b(cid:48) = b/η for a suitable
η. Theorem 6.2 then states that C(cid:48)
b(cid:48) requires (asymptotically) at most a factor of ρ as many trades as Cb
to achieve the same convergence error  where ρ := η · λmax(H 1/2
C(cid:48)H 1/2
T H +
T ).
b(cid:48)  with ρ(cid:48) deﬁned symmetrically to ρ.
Similarly  Cb requires at most a factor of ρ(cid:48) as many trades as C(cid:48)
For C = LMSR and C(cid:48) = IND  we can show that ρ ≤ 2 and ρ(cid:48) ≤ 2  yielding the following result:
Theorem 6.3. Assume that N ≥ 2 and all risk aversions are equal to a. Consider running LMSR with
liquidity b and IND with liquidity b(cid:48) = b/η such that their asymptotic biases are equal. Denote the
IND and the respective market-maker equilibria
iterates of the two runs of the market as µt
IND. Then  with probability 1  there exist t0 and t1 ≥ t0 such that for all t ≥ t1 and
as µ(cid:63)
sufﬁciently small b

T )/λmin(H 1/2

LMSR and µ(cid:63)

LMSR and µt

C H 1/2

T H +

IND

LMSR

LMSR

Et0

IND − µ(cid:63)

LMSR − µ(cid:63)

− µ(cid:63)
where ε = O(b) and Et0[·] = E[· | rt0 ] conditions on the t0th iterate of a given run.
This result means that LMSR and IND are roughly equivalent (up to a factor of two) in terms of the
number of trades required to achieve a given accuracy. This is somewhat surprising as this implies
that maintaining price coherence does not offer strong informational advantages (at least when traders
are individually coherent  as assumed here). However  while there is little difference between the
two costs in terms of accuracy  there is a difference in terms of the worst-case loss. For K securities 
the worst-case loss of LMSR with the liquidity b is b log K  and the worst-case loss of IND with the
liquidity b(cid:48) is b(cid:48)K log 2. If liquidities are chosen as in Theorem 6.3  so that b(cid:48) is up to a factor-of-two
smaller than b  then the worst-case loss of IND is at least (bK/2) log 2  which is always worse than
the LMSR’s loss of b log K  and the ratio of the two losses increases as K grows.
When all risk aversion coefﬁcients are equal to some constant a  then the dependence of Theorem 6.2
on the number of traders N and their risk aversion is similar to the dependence in Theorem 5.6. For
instance  to guarantee that γ stays below a certain level for varying N and a requires b = Ω(N/a).

(cid:2)(cid:13)(cid:13)µ2t(1+ε)

(cid:13)(cid:13)2(cid:3) ≤ Et0

(cid:2)(cid:13)(cid:13)µt

(cid:13)(cid:13)2(cid:3) ≤ Et0

(cid:2)(cid:13)(cid:13)µ(t/2)(1−ε)

LMSR

(cid:13)(cid:13)2(cid:3)  

7 Numerical Experiments

We evaluate the tightness of our theoretical bounds via numerical simulation. We consider a complete
market over K = 5 securities and simulate N = 10 traders with risk aversion coefﬁcients equal
to 1. These values of N and K are large enough to demonstrate the tightness of our results  but
small enough that simulations are tractable. While our theory comprehensively covers heterogeneous

8

Figure 1: (Left) The tradeoff between market-maker bias and convergence. Solid lines are for LMSR 
dashed for IND  the color indicates the number of trades. (Center) Market-maker bias as a function
of b. (Right) Convergence in the objective. Shading indicates 95% conﬁdence based on 20 trading
sequences.

risk aversions and the dependence on the number of traders and securities  we have chosen to
keep these values ﬁxed  so that we can more cleanly explore the impact of liquidity and number
of trades. We consider the two most commonly studied cost functions: LMSR and IND. We ﬁx the
ground-truth natural parameter θtrue and independently sample the belief ˜θi of each trader from
Normal(θtrue  σ2IK)  with σ = 5. We consider a single-peaked ground truth distribution with
k = log ν for k (cid:54)= 1  with ν = 0.02. Trading is simulated
1 = log(1 − ν(K − 1)) and θtrue
θtrue
according to the all-security dynamics (ASD) as described at the start of Section 6. In Appendix E 
we show qualitatively similar results using a uniform ground truth distribution and single-security
dynamics (SSD).
We ﬁrst examine the tradeoff that arises between market-maker bias and convergence error as the
liquidity parameter is adjusted. Fig. 1 (left) shows the combined bias and convergence error  (cid:107)µt− ¯µ(cid:107) 
as a function of liquidity and the number of trades t (indicated by the color of the line) for the two
cost functions  averaged over twenty random trading sequences. The minimum point on each curve
tells us the optimal value of the liquidity parameter b for the particular cost function and particular
number of trades. When the market is run for a short time  larger values of b lead to lower error. On
the other hand  smaller values of b are preferable as the number of trades grows  with the combined
error approaching 0 for small b.
In Fig. 1 (center) we plot the bias (cid:107)µ(cid:63)(b; C) − ¯µ(cid:107) as a function of b for both LMSR and IND. We
compare this with the theoretical approximation (cid:107)µ(cid:63)(b; C) − ¯µ(cid:107) ≈ b(¯a/N )(cid:107)HT ( ¯µ)∂C∗( ¯µ)(cid:107) from
Theorem 5.6. Although Theorem 5.6 only gives an asymptotic guarantee as b → 0  the approximation
is fairly accurate even for moderate values of b. In agreement with Theorem 5.7  the bias of IND is
higher than that of LMSR at any ﬁxed value of b  but by no more than a factor of two.
In Fig. 1 (right) we plot the log of ˆE[F (rt)] − F (cid:63) as a function of the number of trades t for our two
cost functions and several liquidity levels. Even for small t the curves are close to linear  showing
that the local linear convergence rate kicks in essentially from the start of trade in our simulations.
In other words  there exist some ˆc and ˆγ such that  empirically  we have ˆE[F (rt)] − F (cid:63) ≈ ˆcˆγt  or
equivalently  log(ˆE[F (rt)] − F (cid:63)) ≈ log ˆc + t log ˆγ. Plugging the belief values into Theorem 6.2  the
slope of the curve for LMSR should be log10 ˆγ ≈ −0.087b for sufﬁciently small b  and the slope for
IND should be between −0.088b and −0.164b. In Appendix E  we verify that this is the case.

8 Conclusion

Our theoretical framework provides a meaningful way to quantitatively evaluate the error tradeoffs
inherent in different choices of cost functions and liquidity levels. We ﬁnd  for example  that to
maintain a ﬁxed amount of bias  one should set the liquidity parameter b proportional to a measure of
the amount of cash that traders are willing to spend. We also ﬁnd that  although the LMSR maintains
coherent prices while IND does not  the two are equivalent up to a factor of two in terms of the
number of trades required to reach any ﬁxed accuracy  though LMSR has lower worst-case loss.
We have assumed that traders’ beliefs are individually coherent. Experimental evidence suggests that
LMSR might have additional informational advantages over IND when traders’ beliefs are incoherent
or each trader is informed about only a subset of events [12]. We touch on this in Appendix C.2  but
leave a full exploration of the impact of different assumptions on trader beliefs to future work.

9

Liquidity Parameter b0.00.20.40.60.81.0Bias Plus Convergence Error 0.000.040.080.12 #Trades 100 200 5001000Liquidity Parameter b0.00.20.40.60.81.0Market−Maker Bias0.000.040.08llllllllllllllllllllllll Actual Bias LMSRIND Asymptotic Bias LMSRIND−8−6−4−20025050075010001250Number of TradesLog10 of Suboptimality of F Liquidity b 0.010.030.050.07References
[1] Jacob Abernethy  Yiling Chen  and Jennifer Wortman Vaughan. Efﬁcient market making via
convex optimization  and a connection to online learning. ACM Transactions on Economics
and Computation  1(2):Article 12  2013.

[2] Jacob Abernethy  Sindhu Kutty  Sébastien Lahaie  and Rahul Sami. Information aggregation in
exponential family markets. In Proceedings of the 15th ACM Conference on Economics and
Computation (EC)  2014.

[3] Ole Barndorff-Nielsen. Exponential Families. Wiley Online Library  1982.

[4] Joyce Berg  Robert Forsythe  Forrest Nelson  and Thomas Rietz. Results from a dozen years of
election futures markets research. Handbook of experimental economics results  1:742–751 
2008.

[5] Olivier Bousquet and Léon Bottou. The tradeoffs of large scale learning. In Advances in Neural

Information Processing Systems (NIPS)  2008.

[6] Yiling Chen and David M. Pennock. A utility framework for bounded-loss market makers. In

Proceedings of the 23rd Conference on Uncertainty in Artiﬁcial Intelligence (UAI)  2007.

[7] Yiling Chen and Jennifer Wortman Vaughan. A new understanding of prediction markets via
no-regret learning. In Proceedings of the 11th ACM Conference on Electronic Commerce (EC) 
2010.

[8] Miroslav Dudík  Sébastien Lahaie  David M. Pennock  and David Rothschild. A combinatorial
In Proceedings of the 14th ACM Conference on

prediction market for the US elections.
Electronic Commerce (EC)  2013.

[9] Rafael Frongillo and Mark D. Reid. Convergence analysis of prediction markets via randomized

subspace descent. In Advances in Neural Information Processing Systems (NIPS)  2015.

[10] Robin Hanson. Combinatorial information market design. Information Systems Frontiers  5(1):

105–119  2003.

[11] Yu. Nesterov. Efﬁciency of coordinate descent methods on huge-scale optimization problems.

SIAM Journal on Optimization  22(2):341–362  2012.

[12] Kenneth C. Olson  Charles R. Twardy  and Kathryn B. Laskey. Accuracy of simulated ﬂat 

combinatorial  and penalized prediction markets. Presented at Collective Intelligence  2015.

[13] Abraham Othman  David M Pennock  Daniel M Reeves  and Tuomas Sandholm. A practical
liquidity-sensitive automated market maker. ACM Transactions on Economics and Computation 
1(3):14  2013.

[14] Kaare Brandt Petersen and Michael Syskind Pedersen. The matrix cookbook. Technical Report 

Technical University of Denmark  Nov 2012.

[15] R. Tyrrell Rockafellar. Convex analysis. Princeton University Press  1970.

[16] R. Tyrrell Rockafellar and Roger J-B Wets. Variational analysis. Springer-Verlag  2009.

[17] David Rothschild. Forecasting elections: comparing prediction markets  polls  and their biases.

Public Opinion Quarterly  73(5):895–916  2009.

[18] Christian Slamka  Bernd Skiera  and Martin Spann. Prediction market performance and market
liquidity: A comparison of automated market makers. IEEE Transactions on Engineering
Management  60(1):169–185  2013.

[19] Justin Wolfers and Eric Zitzewitz. Prediction markets. The Journal of Economic Perspectives 

18(2):107–126  2004.

10

,Miro Dudik
Sebastien Lahaie
Ryan Rogers
Jennifer Wortman Vaughan
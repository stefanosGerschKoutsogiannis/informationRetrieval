2018,Near-Optimal Policies for Dynamic Multinomial Logit Assortment Selection Models,In this paper we consider the dynamic assortment selection problem under an uncapacitated multinomial-logit (MNL) model. By carefully analyzing a revenue  potential function  we show that a trisection based algorithm achieves an item-independent regret bound of O(sqrt(T log log T)  which matches information theoretical lower bounds up to iterated logarithmic terms. Our proof technique draws tools from the unimodal/convex bandit literature as well as adaptive confidence parameters in minimax multi-armed bandit problems.,Near-OptimalPoliciesforDynamicMultinomialLogitAssortmentSelectionModelsYiningWangMachineLearningDepartmentCarnegieMellonUniversityyiningwa@cs.cmu.eduXiChenSternSchoolofBusinessNewYorkUniversityxchen3@stern.nyu.eduYuanZhouComputerScienceDepartmentIndianaUniversityatBloomingtonandDepartmentofIndustrialandEnterpriseSystemsEngineeringUniversityofIllinoisatUrbana-Champaignyuanz@illinois.eduAbstractInthispaperweconsiderthedynamicassortmentselectionproblemunderanuncapacitatedmultinomial-logit(MNL)model.Bycarefullyanalyzingarev-enuepotentialfunction weshowthatatrisectionbasedalgorithmachievesanitem-independentregretboundofOp?TloglogTq whichmatchesinformationtheoreticallowerboundsuptoiteratedlogarithmicterms.Ourprooftechniquedrawstoolsfromtheunimodal/convexbanditliteratureaswellasadaptiveconﬁ-denceparametersinminimaxmulti-armedbanditproblems.Keywords:dynamicassortmentplanning multinomiallogitchoicemodel trisec-tionalgorithm regretanalysis.1IntroductionAssortmentplanninghasawiderangeofapplicationsine-commerceandonlineadvertising.Givenalargenumberofsubstitutableproducts theassortmentplanningproblemreferstotheselectionofasubsetofproducts(a.k.a. anassortment)offeringtoacustomersuchthattheexpectedrevenueismaximized[2 3 14 17 20].GivenNitems eachassociatedwitharevenueparameter1riPr0 1srepresentingtherevenuearetailercollectsonceacustomerpurchasesthei-thitem.TherevenueparameterstriuNi“1aretypicallyknowntotheretailer whohasfullknowledgeofeachitem’sprices/costs.Inadynamicassortmentplanningproblem assumingthatthereareatotalofTtimeepochs theretailerpresentsanassortmentStĎrNstoanincomingcustomer andobserveshis/herpurchasingactionitPStYt0u.(Ifit“0thenthecustomermakesnopurchasesattimet.)Ifapurchasingactionismade(i.e. it‰0) thecorrespondingrevenueritiscollected.Itisworthynotingthatsinceitemsaresubstitutable(e.g. differentmodelsofcellphones) atypicalsettingofassortmentplanningusuallyrestrictsapurchasetobeasingleitem.Theretailer’sobjectiveistomaximizetheexpectedrevenueovertheTtimeperiods.Suchobjectivescanbebestmeasuredandevaluatedundera“regretminimization”framework inwhichtheretailer’s1Theconstraintriď1iswithoutlossofgenerality becauseitisonlyanormalizationofrevenues.32ndConferenceonNeuralInformationProcessingSystems(NeurIPS2018) Montréal Canada.assortmentsequenceiscomparedagainsttheoptimalassortment.Morespeciﬁcally considerRegretptStuTt“1q:“ETÿt“1RpS˚q´RpStq S˚PargminSĎrNsRpSq(1)astheregretmeasureofanassortmentsequencetStuTt“1 whereRpStq“Errit|Stsistheex-pectedrevenuetheretailercollectsonassortmentSt(fornotationalconveniencewedeﬁner0“0correspondingtothe“no-purchase”action).FortheregretmeasureEq.(1)tobewell-deﬁned itisconventionaltospecifyaprobabilisticmodel(knownas“choicemodel”)thatgovernsacustomer’spurchasingchoiceitPStYt0uonaprovidedassortmentSt.Perhapsthemostpopularchoicemodelisthemultinomial-logit(MNL)choicemodel[5 18 22] whichassignseachitemiPrNsa“preferenceparameter”viě0andthepurchasingchoiceitPStYt0uismodeledbyPrrit“j|Sts“vjv0`řkPStvk @jPStYt0u.(2)Subsequently theexpectedrevenueRpStqcanbeexpressedasRpStq“ÿjPStrjPrrit“j|Sts“řjPStrjvjv0`řjPStvj.(3)Fornormalizationpurposesthepreferenceparameterforthe“no-purchase”actionisassumedtobev0“1.Apartfromthat therestofthepreferenceparameterstviuNi“1areunknowntotheretailerandhavetobeeitherexplicitlyorimplicitlylearntfromcustomers’purchasingactionstituTt“1.1.1OurresultsandtechniquesThemaincontributionofthispaperisanoptimalcharacterizationoftheworst-caseregretundertheMNLassortmentselectionmodelspeciﬁedinEqs.(1)and(2).Morespeciﬁcally wehavethefollowinginformalstatementofthemainresultsinthispaper.Theorem1(informal).Thereexistsapolicywhoseworst-caseregretoverTtimeperiodsisupperboundedbyC1?TloglogTforsomeuniversalconstantC1ą0;furthermore thereexistsanotheruniversalconstantC2ą0suchthatnopolicycanachieveworst-caseregretsmallerthanC2?T.AnimportantaspectofTheorem1isthatourregretboundiscompletelyindependentofthenumberofitemsN whichimprovestheexistingdynamicregretminimizationresultsontheMNLassortmentselectionproblem[2 3 20].Thispropertymakesourresultmorefavorableforscenarioswhenalargenumberofpotentialitemsareavailable e.g. onlinesalesoronlineadvertisement.ToenablesuchanN-independentregret weprovideareﬁnedanalysisofacertainunimodalrevenuepotentialfunctionﬁrststudiedin[20]andconsideratrisectionalgorithmonrevenuelevels borrowingideasfromliteratureonunimodalbanditsoneitherdiscreteorcontinuousarmdomains[1 11 23].Animportantchallengeisthattherevenuepotentialfunction(deﬁnedinEq.(4))doesnotsatisfyconvexityorlocalLipschitzgrowth 2andthereforepreviousresultsonunimodalbanditscannotbedirectlyapplied.Ontheotherhand itisasimpleexercisethatmereunimodalityinmulti-armedbanditscannotleadtoregretsmallerthan?NT becausetheworst-caseconstructionsintheclassicallowerboundormulti-armedbanditshaveunimodalarms[6 7].Toovercomesuchdifﬁculties weestablishadditionalpropertiesofthepotentialfunctioninEq.(4)whicharedifferentfromclassicalconvexityorLipschitzgrowthproperties.Inparticular weproveconnectionsbetweenthepotentialfunctionandthestraightlineFpθq“θ whichisthenusedasguidelinesinourupdaterulesoftrisection.Also becausethepotentialfunctionbehavesdifferentlyonFpθqďθandFpθqěθ ourtrisectionalgorithmisasymmetricinthetreatmentsofthetwotrisectionmid-points whichisincontrasttoprevioustrisectionbasedmethodsforunimodalbandits[11 23]thattreatbothtrisectionmid-pointssymmetrically.WealsoremarkthattheupperandlowerboundsinTheorem1matchexceptforanloglogTterm.Underthe“gap-free”settingwhereOp?Tqregretistobeexpected theremovalofadditionallogT2Seetherelatedworksection1.2fordetails.2termsindynamicassortmentselectionandunimodalbanditproblemsishighlynon-trivial.Mostpreviousresultsondynamicassortmentselection[2 3 20]andunimodal/convexbandit[1 11 23]haveadditionallogTtermsinregretupperbounds.(Theworkof[11]alsoderivedgap-dependentregretboundsforunimodalbandit whichisnoteasilycomparabletoourbounds.)TheimprovementfromlogTtologlogTachievedinthispaperisdonebyusingasharperlaw-of-the-iterated-logarithm(LIL)typeconcentrationinequalities[16]andanadaptiveconﬁdencestrategysimilartotheMOSSalgorithmformulti-armedbandits[4].Itsanalysis however isquitedifferentfromtheanalysisoftheMOSSalgorithmin[4]andalsoyieldsanadditionalloglogTfactor.WeconjecturethattheadditionalloglogTfactorcanalsoberemovedbyresortingtomuchmorecomplicatedprocedures aswediscussinSec.6.1.2RelatedworkThequestionofdynamicoptimizationofcommodityassortmentshasreceivedincreasingattentioninboththemachinelearningandoperationsmanagementsociety[2 3 8 19 21] asthemeanutilitiesofcustomers(correspondingtothepreferenceparameterstviuinourmodel)aretypicallyunknownandhavetobelearntontheﬂy.Theworkof[19]isperhapstheclosesttoourpaper whichanalyzedthesamerevenuepotentialfunctionanddesignedagolden-ratiosearchalgorithmwhoseregretonlydependslogarithmicallyonthenumberofitems.Theanalysisof[19]assumesaconstantgapbetweenanytwoassortmentlevelsets whichmightfailtoholdwhenthenumberofitemsNislarge.InthisworkwerelaxthegapassumptionandalsoremovetheadditionallogNdependencybyamorereﬁnedanalysisofpropertiesoftherevenuepotentialfunctionandborrowing“trisection”ideasfromtheunimodalbanditliterature[1 11 23].Theworksof[2 3]consideredvariantsofUCB/ThompsonsamplingtypemethodsandfocusedprimarilyonthecapacitatedMNLassortmentmodel inwhichthesizeofeachassortmentStisnotallowedtoexceedapre-speciﬁedparameterKăN.Itisknownthattheregretbehaviorincapacitatedanduncapacitatedmodelscanbevastlydifferent:inthecapacitatedcasea?NTregretlowerboundexistsprovidedthatKăN{4 whilefortheuncapacitatedmodelitispossibletoachievelogNorevenN-independentregret.Anotherrelevantlineofresearchisunimodalbandit[1 11 12 23] inwhichdiscreteorcontinuousmulti-armedbanditproblemsareconsideredwithadditionalunimodalityconstraintsonthemeansofthearms.Apartfromunimodality additionalstructuressuchas“inverseLipschitzcontinuity”(e.g. |µpiq´µpjq|ěL|i´j|)orconvexityareimposedtoensureimprovementofregret bothofwhichfailtoholdforthepotentialfunctionFarisingfromuncapacitatedMNLassortmentchoiceproblems.Inaddition underthe“gap-free”settingwhereanOp?Tqregretistobeexpected mostpreviousworkshaveadditionallogTtermsintheirregretupperbounds exceptfortheworkof[12]whichintroducesadditionalstrongregularityconditionsontheunderlyingfunctions.In[10] amoregeneralproblemofoptimizingpiecewise-constantfunctionisconsidered withoutunimodalstructureofthefunctionassumed.Consequently aweakerrOpT2{3qregretisderived.2TherevenuepotentialfunctionanditspropertiesFortheMNLassortmentselectionmodelwithoutcapacityconstraints itisaclassicalresultthattheoptimalassortmentmustconsistofitemswiththelargestrevenueparameters(see e.g. [17]):Proposition1.ThereexistsθPr0 1ssuchthatLθ:“tiPrNs:riěθusatisﬁesRpLθq“RpS˚q.Proposition1suggeststhatitsufﬁcestoconsider“level-set”typeassortmentsLθ“tiPrNs:riěθuandﬁndsθPr0 1sthatgivesrisestothelargestRpLθq.Thismotivatesthefollowing“potential”function whichtakesarevenuethresholdθasinputandoutputstheexpectedrevenueofitscorrespondinglevelsetassortments:Therevenuepotentialfunction:Fpθq:“RpLθq θPr0 1s.(4)ThepotentialFwasﬁrstintroducedandconsideredin[17] inwhichitwasprovedthatFisleft-continuous piecewise-constantandunimodalinitsinputrevenueθ.Usingsuchunimodality a3Figure1:IllustrationofthepotentialfunctionFpθq theimportantquantitiesF˚andθ˚ andtheirproperties.golden-ratiosearchbasedpolicywasdesignedthatachievesOplogNlogTqregretunderadditionalconsecutivegapassumptionsofthelevelsetassortmentstLθu.Toderivegap-independentresultsandtogetridoftheadditionallogNdependency weprovideamorereﬁnedanalysisofpropertiesofthepotentialfunctionFinthispaper summarizedinthefollowingthreelemmas:Lemma1.Thereexistsθ˚ą0suchthatθ˚“Fpθ˚q“F˚“supθě0Fpθq“RpS˚q.Lemma2.Foranyθěθ˚ FpθqďθandFpθqěFpθ`q whereFpθ`q“limϕÑθ`Fpϕq.Lemma3.Foranyθďθ˚ FpθqěθandFpθqďFpθ`q.Theproofsoftheabovelemmasaregivenintheappendix.ThegivearathercompletepictureofthebehaviorofthepotentialfunctionF andmostimportantlytherelationshipbetweenFandthecentralstraightlineFprq“r asdepictedinFigure1.Moreprecisely ThemodeofFoccursatitsintersectionwithFprq“randmonotonicallydecreasesmovingawayfromθ˚inbothdirections.ThishelpsusgaugethepositioningofaparticularrevenuelevelθbysimplycomparingtheexpectedrevenueofRpLθqwithθitself motivatinganasymmetrictrisectionalgorithmwhichwedescribeinthenextsection.3TrisectionandregretanalysisWeproposeanalgorithmbasedontrisectionsofthepotentialfunctionFinordertolocatelevelθ˚atwhichthemaximumexpectedrevenueF˚“Fpθ˚qisattained.Ouralgorithmavoidsexplicitlyestimatingindividualitems’meanutilitiestviuNi“1 andsubsequentlyyieldsaregretindependentofthenumberofitemsN.Weﬁrstgiveasimpliﬁedalgorithm(pseudo-codedescriptioninAlgorithm1)withanadditionalOp?logTqtermintheregretupperboundandoutlineitsproofs.WefurthershowhowtheadditionaldependencyonTcanbeimprovedtoOp?loglogTqandeventuallyfullyremovedbyusingmoreadvancedtechniques.Duetospaceconstraints completeproofsofallresultsaredeferredtotheappendix.Toassistwithreadability belowwelistnotationsusedinthealgorithmdescriptiontogetherwiththeirmeanings:-aτandbτ:leftandrightboundariesthatcontainθ˚;itisguaranteedthataτďθ˚ďbτwithhighprobability andtheregretincurredonfailureeventsisstrictlycontrolled;-xτandyτ:trisectionpoints;xτisclosertoaτandyτisclosertobτ;-‘tpyτqandutpyτq:lowerandupperconﬁdencebandsforFpyτqestablishedatiterationt;itisguaranteedthat‘tpyτqďFpyτqďutpyτqwithhighprobability andtheregretincurredonfailureeventsisstrictlycontrolled;-ρtpyτq:accumulatedrewardbyexploringlevelsetLyτuptoiterationt.Withthesenotationsinplace weprovideadetaileddescriptionofAlgorithm1tofacilitatetheunderstanding.Thealgorithmoperatesinepochs(outeriterations)τ“1 2 ¨¨¨untilatotalofT4Input:revenueparametersr1 ¨¨¨ rnPr0 1s timehorizonTOutput:sequenceofassortmentselectionsS1 S2 ¨¨¨ STĎrNs1Initialization:a0“0 b0“1;2forτ“0 1 ¨¨¨do3xτ“23aτ`13bτ yτ“13aτ`23bτ;Źtrisection4‘0pxτq“‘0pyτq“0 u0pxτq“u0pyτq“1;Źinitializationofconﬁdenceintervals5ρ0pxτq“ρ0pyτq“0;Źinitializationofaccumulatedrewards6fort“1to16rpyτ´xτq´2lnpTqqs4do7if‘t´1pyτqďyτďut´1pyτqthenρtpyτq ‘tpyτq utpyτqÐEXPLOREpyτ t 1{T2q;8elseρtpyτq ‘tpyτq utpyτqÐρt´1pyτq ‘t´1pyτq ut´1pyτq;9Exploittheleftendpointaτ:pickassortmentS“Laτ;10endŹUpdatetrisectionparameters11ifutpyτqăyτthenaτ`1“aτ bτ`1“yτ;12elseaτ`1“xτ bτ`1“bτ;13endAlgorithm1:Thetrisectionalgorithm.assortmentselectionsaremade.Theobjectiveofeachouteriterationτistoﬁndtherelativepositionbetweentrisectionpoints(xτ yτ)andthe“reference”locationθ˚ afterwhichthealgorithmeithermovesaτtoxτorbτtoyτ effectivelyshrinkingthelengthoftheintervalraτ bτsthatcontainsθ˚toitstwothirds.Furthermore toavoidalargecumulativeregret levelsetcorrespondingtotheleftendpointaτisexploitedineachtimeperiodwithintheepochτtooffsetpotentiallylargeregretincurredbyexploringyτ.InSteps7and8ofAlgorithm1 lowerandupperconﬁdencebandsr‘tpyτq utpyτqsforFpyτqareconstructedusingconcentrationinequalities(e.g.Hoeffding’sinequality[15]).TheseconﬁdencebandsareupdateduntiltherelationshipbetweenyτandFpyτqisclear orapre-speciﬁednumberofinneriterationsforouteriterationτhasbeenreached(settonτ:“r16pyτ´xτq´2lnpT2qsinStep6).Algorithm2givesdetaileddescriptionsonhowsuchconﬁdenceintervalsarebuilt basedonrepeatedexplorationoflevelsetLyτ.AftersufﬁcientlymanyexplorationsofLyτ adecisionismadeonwhethertoadvancetheleftbounary(i.e. aτ`1Ðxτ)ortherightboundary(i.e. bτ`1Ðyτ).Belowwegivehigh-levelintuitionsonhowsuchdecisionsaremade withrigorousjustiﬁcationspresentedlateraspartoftheproofofthemainregrettheoremforAlgorithm1.1.IfthereissufﬁcientevidencethatFpyτqăyτ(e.g. utpyτqăyτ) thenyτmustbetotherightofθ˚(i.e. yτěθ˚)duetoLemma2.Therefore wewillshrinkthevalueofrightboundarybysettingbτ`1Ðyτ.2.Ontheotherhand whenutpyτqěyτ wecanconcludethatxτmustbetotheleftofθ˚(i.e. xτďθ˚).Weshowthisbycontradiction.Assumingthatxτąθ˚ sinceyτisalwaysgreaterthanxτ(andthusyτąθ˚)andthegapbetweenyτandFpyτqisatleastyτ´xτ3 thegapwillbedetectedbytheconﬁdencebandsandthuswewillhaveutpyτqăyτwithhighprobability.Thisleadstoacontradiction.Therefore sincexτistotheleftofθ˚ weshouldincreasethevalueoftheleftboundarybysettingaτ`1Ðxτ.Thefollowingtheoremisourmainupperboundresultforthe(worst-case)regretincurredbyAlgorithm1.3ByLemma2 wehaveyτ´Fpyτqěyτ´Fpxτqěyτ´xτ4StopwheneverthemaximumnumberofiterationsTisreached.5Input:revenuelevelθ timet conﬁdencelevelδOutput:accumulatedrevenueρtpθq conﬁdenceintervals‘tpθqandutpθq1PickassortmentS“LθpNqandobservepurchasingactionjPSYt0u;2Updateaccumulatedreward:ρtpθq“ρt´1pθq`rj;Źr0:“03Updateconﬁdenceintervals:r‘tpθq utpθqs“ρtpθqt˘blogp1{δq2t.Algorithm2:EXPLORESubroutine:exploringacertainrevenuelevelθTheorem2.ThereexistsauniversalconstantC1ą0suchthatforallparameterstviuNi“1andtriuNi“1satisfyingriPr0 1s theregretincurredbyAlgorithm1satisﬁesRegptStuTt“1q“ETÿt“1RpS˚q´RpStqďC1aTlogT.(5)3.1ImprovedregretwithLILconﬁdenceintervalsInthissectionweconsideravariantofAlgorithm1thatachievesanimprovedregretofOp?TloglogTq.Thekeyideaistousetheﬁnite-samplelaw-of-iterated-logarithm(LIL [13])conﬁdenceintervals[16]togetherwithanadaptivechoiceofconﬁdenceparameterssimilartotheMOSSstrategy[4]inordertocarefullyupperboundingregretinducedbyfailureprobabilities.Morespeciﬁcally moststepsinAlgorithms1and2remainunchanged andthechangeswemakearesummarizedbelow:-Step3inAlgorithm2isreplacedwithanLIL-conﬁdenceinterval[16]:r‘tpθq utpθqs“ρtpθqt˘4clnlnp2Tq`lnp112{δqt.(6)-Step7inAlgorithm1isreplacedwithEXPLOREpyτ t 1{pTpyτ´xτq2qqforanadaptiveconﬁ-denceparameterδ“1{pTpyτ´xτq2q;correspondingly thenumberofinneriterationsischangedtonτ“64rpyτ´xτq´2rlnlnp2Tq`lnp112Tpyτ´xτq2qssTheﬁrstchangewemaketoachieveimprovedregretisthewayhowconﬁdenceintervalsr‘tpθq utpθqsofFpθqisconstructed.ComparingthenewconﬁdenceintervalinEq.(6)withtheoriginaloneinAlgorithm2 theimportantdifferenceisthelnlnp2Tqtermarisingfromthelawoftheiteratedlogarithm whichmakestheconﬁdenceintervalsholduniformlyforallt.Thisalsoleadstoadifferentchoiceofconﬁdenceparameterδinconstructingconﬁdenceintervals whichisthesecondimportantchangewemake.Inparticular insteadofusingauniversalconﬁdencelevel5δ“Op1{T2qthroughouttheentireprocedure “adaptive”conﬁdencelevelsδ“Op1{pTpyτ´xτq2qqareused whichincreasesasthealgorithmmovesontolateriterations.Suchchoiceofconﬁdenceparametersismotivatedbythefactthattheaccumulatedregretsufferslessfromaconﬁdenceintervalfailureatlateriterations.Indeed sincewearerelativelyclosertotheoptimalassortment the“excessregret”sufferedwhentheconﬁdenceintervalfailstocoverthetruepotentialfunctionvalueissmaller.Wealsoremarkthatsimilarconﬁdenceparameterchoiceswerealsoadoptedin[4]toremoveadditionallogpTqfactorsinmulti-armedbanditproblems.ThefollowingtheoremshowsthatthealgorithmvariantpresentedaboveachievesanasymptoticregretofOp?TloglogTq considerablyimprovingTheorem2establishinganOp?TlogTqregretbound.Itsproofisrathertechnicalandinvolvescarefulanalysisoffailureeventsateachouteriterationτofthetrisectionalgorithm.Duetospaceconstraints wedefertheentireproofofTheorem3totheappendix.5δ“Op1{T2qratherthanδ“Op1{TqisusedbecauseanadditionalunionboundisrequiredforallinneriterationstineachouteriterationτforconﬁdenceintervalsconstructedviatheHoeffding’sinequality.6Theorem3.ThereexistsauniversalconstantC1ą0suchthatforallparameterstviuNi“1andtriuNi“1satisfyingriPr0 1s theregretincurredbythevariantofAlgorithm1satisﬁesRegptStuTt“1q“ETÿt“1RpS˚q´RpStqďC1aTloglogT.(7)4LowerboundWeprovethefollowingtheoremshowingthatnopolicycanachieveanaccumulatedregretsmallerthanΩp?Tqintheworstcase.Theorem4.LetNandTbethenumberofitemsandthetimehorizonthatcanbearbitrary.Thereexistsrevenueparametersr1 ¨¨¨ rNPr0 1ssuchthatforanypolicyπ supv1 ¨¨¨ vNě0ETÿt“1RpS˚q´RpStqě?T{384.(8)Theorem4showsthatourregretupperboundsinTheorems2and3aretightupto?logTor?loglogTfactorsandnumericalconstants.Weconjecture(inSec.6)thattheadditional?loglogTtermcanalsoberemoved leadingtoupperandlowerboundsthatmatchuptouniversalconstants.WenextgiveasketchoftheproofofTheorem4.Duetospaceconstraints weonlypresentanoutlineoftheproofanddeferproofsofalltechnicallemmastotheappendix.Weﬁrstdescribetheunderlyingparametervaluesonwhichourlowerboundproofisbuilt.FixrevenueparameterstriuNi“1asr1“1 r2“1{2andr3“¨¨¨“rN“0 whichareknownapriori.WethenconsidertwoconstructionsoftheunknownmeanutilityparameterstviuNi“1:P0:v1“1´1{4?T v2“1 v3“¨¨¨“vN“0;P1:v1“1`1{4?T v2“1 v3“¨¨¨“vN“0.WenotethatP0andP1alsogivetheprobabilitydistributionsthatcharacterizethecustomerrandompurchasingactions;andthuswewillusePjrAstodenotetheprobabilityofeventAundertheutilityparametersspeciﬁedbyPjforjPt0 1u.TheﬁrstlemmashowsthattheredoesnotexistestimatorsthatcanidentifyP0fromP1withhighprobabilitywithonlyTobservationsofrandompurchasingactions.ItsproofinvolvescarefulcalculationoftheKullback-Leibler(KL)divergencebetweenthetwohypothesizeddistributionsandsubsequentapplicationofLeCam’slemmatothetestingquestionbetweenP0andP1.Lemma4.ForanyestimatorpψPt0 1uwhoseinputsareTrandompurchasingactionsi1 ¨¨¨ iT itholdsthatmaxjPt0 1uPjrpψ‰jsě1{3.Ontheotherhand thefollowinglemmashowsthat ifthepolicyπcanachieveasmallregretunderbothP0andP1 thenonecanconstructanestimatorbasedonπsuchthatwithlargeprobabilitytheestimatorcandistinguishbetweenP0andP1fromobservedcustomers’purchasingactions.Lemma5.SupposeapolicyπsatisﬁesRegretptStuTt“1qă?T{384forbothP0andP1.ThenthereexistsanestimatorpψPt0 1usuchthatPjrpψ‰jsď1{4forbothj“0andj“1.Lemma5isprovedbyexplicitlyconstructingaclassiﬁer(tester)pψfromanysequenceoflowregret.Inparticular foranyassortmentsequencetStuTt“1 weconstructpψaspψ“0if1TřTt“1Ir1PSt 2RStsě1{2andpψ“1otherwise.UsingMarkov’sinequalityandtheconstructionoftri viu itcanbeshownthatifRegretptStuTt“1qą?T{384thenpψisagoodtesterwithsmalltestingerror.Detailedcalculationsandthecompleteproofisdeferredtotheappendix.CombiningLemmas4and5weprovedourlowerboundresultinTheorem4.5NumericalresultsWepresentsimplenumericalresultsofourproposedtrisection(anditsLIL-improvedvariant)algorithmandcomparetheirperformancewithseveralcompetitorsonsyntheticdata.7Table1:Average(mean)andworst-case(max)regretofourtrisectionandLIL-trisectionalgorithmsandtheircompetitorsonsyntheticdata.NisthenumberofitemsandTisthetimehorizon.UCBTHOMPSONGRSTRISEC.LIL-TRISEC.pN Tqmeanmaxmeanmaxmeanmaxmeanmaxmeanmax(100 500)34.938.11.282.9710.922.47.687.685.175.17(250 500)54.356.22.814.957.9334.27.577.575.025.02(500 500)73.475.54.904.957.0243.47.437.434.914.91(1000 500)90.393.58.1710.75.3445.17.447.444.744.74(100 1000)73.178.21.362.79139.9175.08.698.695.365.36(250 1000)113.7119.33.365.1790.1110.18.698.695.315.31(500 1000)136.8140.35.657.6465.7113.99.389.386.016.01(1000 1000)160.8165.49.3112.48.4322.89.779.776.396.39Experimentalsetup.WegenerateeachoftherevenueparameterstriuNi“1independentlyandidenticallyfromtheuniformdistributiononr.4 .5s.ForthepreferenceparameterstviuNi“1 theyaregeneratedindependentlyandidenticallyfromtheuniformdistributiononr10{N 20{Ns whereNisthetotalnumberofitemsavailable.Tomotivateourparametersetting considerthefollowingthreetypesofassortments:the“singleassortment”S“tiuforsomeiPrNs the“fullassortment”S“t1 2 ¨¨¨ Nu andthe“appropriate”assortmentS“tiPrNs:riě0.42u.ForthesingleassortmentS“tiu becausethepreferenceparameterforeachitemisrathersmall(viď20{N) nosingleassortmentcanproduceanexpectedrevenueexceeding0.5ˆp20{Nq{p1`20{Nq“10{p20`Nq.ForthefullassortmentS“t1 2 ¨¨¨ Nu becauseřNi“1rivipÑ0.45ˆ15{NˆN“6.75andřNi“1vipÑ15bythelawoflargenumbers theexpectedrevenueofSisaround6.75{p1`15q“0.422.Finally forthe“appropriate”assortmentS“tiPrNs:riě0.42u wehaveřiPSrivipÑ0.46ˆ15{Nˆ0.8N“5.52andřiPSvipÑ15{Nˆ0.8N“12.Therefore theexpectedrevenueofSisaround5.52{p1`12q“0.425ą0.422.Theabovediscussionshowsthatarevenuethresholdr˚Pp0.4 0.5qismandatorytoextractaportionoftheitemstiPrNs:riěr˚uthatattaintheoptimalexpectedrevenue whichishighlynon-trivialforadynamicassortmentselectionalgorithmtoidentify.Comparativemethods.OurtrisectionalgorithmwithOp?TlogTqregretisdenotedasTRISEC anditsLIL-variant(withregretOp?TloglogTq)isdenotedasLIL-TRISEC.TheothermethodswecompareagainstincludetheUpperConﬁdenceBoundalgorithmof[2](denotedasUCB) theThompsonsamplingalgorithmof[3](denotedasTHOMPSON) andtheGoldenRatioSearchalgorithmof[19](denotedasGRS).NotethatbothUCBandTHOMPSONproposedin[2 3]wereinitiallydesignedforthecapacitatedMNLmodel inwhichthenumberofitemseachassortmentcontainsisrestrictedtobeatmostKăN.Inourexperiments weoperateboththeUCBandTHOMPSONalgorithmsundertheuncapacitatedsetting simplybyremovingtheconstraintsetwhenperformingeachassortmentoptimization.Mosthyper-parameters(suchasconstantsinconﬁdencebands)aresetdirectlyusingthetheoreticalvalues.OneexceptionisourLIL-TRISECTalgorithm inwhichweremovethecoefﬁcientof4infrontofthesquareroottermintheconﬁdencebandsinEq.(6) whichcanbethoughtofastakingεÑ0`intheﬁnite-sampleLILinequality(seeLemma14)andwasalsoadoptedin[16].AnotherexceptionistheGRSalgorithm:in[19]thenumberofexplorationiterationsissetto34lnp2Nq{β2whereβ“minj‰j1|RpLrjq´RpLrj1q| whichisinappropriateforour“gap-free”syntheticalsettinginwhichβ“0.Instead weusethecommonchoiceof?Texplorationiterationsintypicalgap-independentbanditproblemsforGRS.Results.InTable1wereportthemeanandmaximumregretfrom20independentrunsofeachalgorithmonoursyntheticdata withdifferentsettingsofN(numberofitems)andT(timehorizon).Weobservethatasthenumberofitems(N)becomeslarge ouralgorithms(TRISECandLIL-TRISEC)achievesmallermeanandmaximumregretcomparedtotheircompetitors andLIL-TRISECconsistentlyoutperformsTRISECinallsettings.UnlikeUCBandTHOMPSONwhoseregretdependpolynomialonN ourTRISECandLIL-TRISECalgorithmshavenodependencyonNandhencetheir8regretdoesnotincreasesigniﬁcantlywithN.WhileGRSalsohasweak(logarithmic)dependencyonN itspureexplorationpluspureexploitationstructuremakesitsperformanceratherunstable whichisevidentfromthelargegapsbetweenmeanandmaximumregretofGRS.6DiscussionandconclusionInthispaperweconsiderthedynamicassortmentallocationproblemunderuncapacitatedMNLmodelsandderivenear-optimalregretbounds.OneimportantopenquestionistofurtherremovetheOp?loglogTqtermintheupperboundinTheorem2andeventuallyachieveupperandlowerregretboundsthatmatcheachotheruptouniversalnumericalconstants.WeconjecturethatsuchimprovementispossiblebyconsideringasharperLILconcentrationinequalitywhich insteadofholdinguniformlyforalltPt1 2 ¨¨¨u holdsonlyat“doublingchecking”pointst1 2 4 8 ¨¨¨u.Otherquestionsworthinvestigatingistodesign“horizon-free”algorithmswhichautomaticallyadaptstothetimehorizonTthatisnotknownapriori and“instance-optimal”regretboundswhoseregretdependsexplicitlyontheproblemparameterstriuni“1 tviuni“1andmatchingcorresponding(instance-dependent)minimaxlowerboundsinwhichtviuni“1areknownuptopermutations.Suchinstance-optimalregretmightpotentiallydependon“revenuegaps”∆i“RpS˚q´RpLriq whereS˚istheoptimalassortmentandriistherevenueparameteroftheitemwiththeithlargestrevenue.AcknowledgmentsXiChenwouldliketothankthesupportfromAlibabaInnovationResearchAwardandBloombergDataScienceResearchGrant.PartoftheworkwasdonewhenYuanZhouwasvisitingtheShanghaiUniversityofFinanceandEconomics.References[1]A.Agarwal D.P.Foster D.Hsu S.M.Kakade andA.Rakhlin.Stochasticconvexoptimizationwithbanditfeedback.SIAMJournalonOptimization 23(1):213–240 2013.[2]S.Agrawal V.Avandhanula V.Goyal andA.Zeevi.Anexploration-exploitationapproachforassortmentselection.InEC 2016.[3]S.Agrawal V.Avandhanula V.Goyal andA.Zeevi.Thompsonsamplingformnl-bandit.InCOLT 2017.[4]J.-Y.AudibertandS.Bubeck.Minimaxpoliciesforadversarialandstochasticbandits.InCOLT 2009.[5]A.Börsch-Supan.Onthecompatibilityofnestedlogitmodelswithutilitymaximization.JournalofEconometrics 43(3):373–388 1990.[6]S.BubeckandN.Cesa-Bianchi.Regretanalysisofstochasticandnonstochasticmulti-armedbanditproblems.FoundationsandTrendsinMachineLearning 5(1):1–122 2012.[7]S.Bubeck R.Munos andG.Stoltz.Pureexplorationinmulti-armedbanditsproblems.InALT 2009.[8]F.CaroandJ.Gallien.DynamicAssortmentwithDemandLearningforSeasonalConsumerGoods.ManagementScience 53(2):276–292 2007.[9]X.ChenandY.Wang.Anoteontightlowerboundformnl-banditassortmentselectionmodels.arXivpreprint:arXiv:1709.06192 2017.[10]V.Cohen-AddadandV.Kanade.Onlineoptimizationofsmoothedpiecewiseconstantfunctions.arXivpreprintarXiv:1604.01999 2016.[11]R.CombesandA.Proutiere.Unimodalbandits:Regretlowerboundsandoptimalalgorithms.InICML 2014.[12]E.W.Cope.Regretandconvergenceboundsforaclassofcontinuum-armedbanditproblems.IEEETransactionsonAutomaticControl 54(6):1243–1253 2009.9[13]D.DarlingandH.Robbins.Iteratedlogarithminequalities.InHerbertRobbinsSelectedPapers pages254–258.Springer 1985.[14]N.Golrezaei H.Nazerzadeh andP.Rusmevichientong.Real-timeoptimizationofpersonalizedassortments.ManagementScience 60(6):1532–1551 2014.[15]W.Hoeffding.Probabilityinequalitiesforsumsofboundedrandomvariables.JournaloftheAmericanstatisticalassociation 58(301):13–30 1963.[16]K.Jamieson M.Malloy R.Nowak andS.Bubeck.lil’UCB:Anoptimalexplorationalgorithmformulti-armedbandits.InCOLT 2014.[17]A.G.Kök M.L.Fisher andR.Vaidyanathan.Assortmentplanning:Reviewofliteratureandindustrypractice.InRetailsupplychainmanagement pages99–153.Springer 2008.[18]D.McFadden.Econometricmodelsforprobabilisticchoiceamongproducts.JournalofBusiness pagesS13–S29 1980.[19]P.Rusmevichientong Z.-J.Shen andD.Shmoys.Dynamicassortmentoptimizationwithamultinomiallogitchoicemodelandcapacityconstraint.OperationsResearch 58(6):1666–1680 2010.[20]P.RusmevichientongandH.Topaloglu.Robustassortmentoptimizationinrevenuemanagementunderthemultinomiallogitchoicemodel.OperationsResearch 60(4):865–882 2012.[21]D.SaureandA.Zeevi.Optimaldynamicassortmentplanningwithdemandlearning.Manufac-turing&ServiceOperationsManagement 15(3):387–404 2013.[22]H.C.W.L.Williams.Ontheformationoftraveldemandmodelsandeconomicevaluationmeasuresofuserbeneﬁt.EnvironmentandPlanningA:EconomyandSpace 9:285–344 1977.[23]J.Y.YuandS.Mannor.Unimodalbandits.InICML 2011.10,Yining Wang
Xi Chen
Yuan Zhou
Santtu Tikka
Antti Hyttinen
Juha Karvanen
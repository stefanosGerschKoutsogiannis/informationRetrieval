2014,Parallel Double Greedy Submodular Maximization,Many machine learning problems can be reduced to the maximization of submodular functions. Although well understood in the serial setting  the parallel maximization of submodular functions remains an open area of research with recent results only addressing monotone functions. The optimal algorithm for maximizing the more general class of non-monotone submodular functions was introduced by Buchbinder et al. and follows a strongly serial double-greedy logic and program analysis. In this work  we propose two methods to parallelize the double-greedy algorithm. The first  coordination-free approach emphasizes speed at the cost of a weaker approximation guarantee. The second  concurrency control approach guarantees a tight 1/2-approximation  at the quantifiable cost of additional coordination and reduced parallelism. As a consequence we explore the trade off space between guaranteed performance and objective optimality. We implement and evaluate both algorithms on multi-core hardware and billion edge graphs  demonstrating both the scalability and tradeoffs of each approach.,ParallelDoubleGreedySubmodularMaximizationXinghaoPan1StefanieJegelka1JosephGonzalez1JosephBradley1MichaelI.Jordan1 21DepartmentofElectricalEngineeringandComputerScience and2DepartmentofStatisticsUniversityofCalifornia Berkeley Berkeley CAUSA94720{xinghao stefje jegonzal josephkb jordan}@eecs.berkeley.eduAbstractManymachinelearningproblemscanbereducedtothemaximizationofsub-modularfunctions.Althoughwellunderstoodintheserialsetting theparallelmaximizationofsubmodularfunctionsremainsanopenareaofresearchwithrecentresults[1]onlyaddressingmonotonefunctions.Theoptimalalgorithmformaximizingthemoregeneralclassofnon-monotonesubmodularfunctionswasintroducedbyBuchbinderetal.[2]andfollowsastronglyserialdouble-greedylogicandprogramanalysis.Inthiswork weproposetwomethodstoparallelizethedouble-greedyalgorithm.Theﬁrst coordination-freeapproachemphasizesspeedatthecostofaweakerapproximationguarantee.Thesecond concurrencycontrolapproachguaranteesatight1/2-approximation atthequantiﬁablecostofadditionalcoordinationandreducedparallelism.Asaconsequenceweexplorethetradeoffspacebetweenguaranteedperformanceandobjectiveoptimality.Weimplementandevaluatebothalgorithmsonmulti-corehardwareandbillionedgegraphs demonstratingboththescalabilityandtradeoffsofeachapproach.1IntroductionManyimportantproblemsincludingsensorplacement[3] imageco-segmentation[4] MAPinferencefordeterminantalpointprocesses[5] inﬂuencemaximizationinsocialnetworks[6] anddocumentsummarization[7]maybeexpressedasthemaximizationofasubmodularfunction.Thesubmodularformulationenablestheuseoftargetedalgorithms[2 8]thatoffertheoreticalworst-caseguaranteesonthequalityofthesolution.Forseveralmaximizationproblemsofmonotonesubmodularfunctions(satisfyingF(A)≤F(B)forallA⊆B) asimplegreedyalgorithm[8]achievestheoptimalapproximationfactorof1−1e.Theoptimalresultforthewider importantclassofnon-monotonefunctions—anapproximationguaranteeof1/2—ismuchmorerecent andachievedbyadoublegreedyalgorithmbyBuchbinderetal.[2].Whiletheoreticallyoptimal inpracticethesealgorithmsdonotscaletolargerealworldproblems sincetheinherentlyserialnatureofthealgorithmsposesachallengetoleveragingadvancesinparallelhardware.Thislimitationraisesthequestionofparallelalgorithmsforsubmodularmaximizationthatideallypreservethetheoreticalbounds orweakenthemgracefully inaquantiﬁablemanner.Inthispaper weaddressthechallengeofparallelizationofgreedyalgorithms inparticularthedoublegreedyalgorithm fromtheperspectiveofparalleltransactionprocessingsystems.Thisalternativeperspectiveallowsustoapplyadvancesindatabaseresearchrangingfromfastcoordination-freeapproacheswithlimitedguaranteestosophisticatedconcurrencycontroltechniqueswhichensureadirectcorrespondencebetweenparallelandserialexecutionsattheexpenseofincreasedcoordination.Wedeveloptwoparallelalgorithmsforthemaximizationofnon-monotonesubmodularfunctionsthatoperateatdifferentpointsalongthecoordinationtradeoffcurve.WeproposeCF-2gasacoordination-freealgorithmandcharacterizetheeffectofreducedcoordinationontheapproximationratio.ByboundingthepossibleoutcomesofconcurrenttransactionsweintroducetheCC-2galgorithmwhich1guaranteesserializableparallelexecutionandretainstheoptimalityofthedoublegreedyalgorithmattheexpenseofincreasedcoordination.Theprimarycontributionsofthispaperare:1.Weproposetwoparallelalgorithmsforunconstrainednon-monotonesubmodularmaximiza-tion whichtradeoffparallelismandtightapproximationguarantees.2.WeprovideapproximationguaranteesforCF-2gandanalyticallyboundtheexpectedlossinobjectivevalueforset-coverwithcostsandmax-cutasrunningexamples.3.WeprovethatCC-2gpreservestheoptimalityoftheserialdoublegreedyalgorithmandanalyticallyboundtheadditionalcoordinationoverheadforcoveringwithcostsandmax-cut.4.Wedemonstrateempiricallyusingtwosyntheticandfourrealdatasetsthatourparallelalgorithmsperformwellintermsofbothspeedandobjectivevalues.Therestofthepaperisorganizedasfollows.Sec.2discussestheproblemofsubmodularmaximiza-tionandintroducesthedoublegreedyalgorithm.Sec.3providesbackgroundonconcurrencycontrolmechanisms.WedescribeandprovideintuitionforourCF-2gandCC-2galgorithmsinSec.4andSec.5 andthenanalyzethealgorithmsboththeoretically(Sec.6)andempirically(Sec.7).2SubmodularMaximizationAsetfunctionF:2V→RdeﬁnedoversubsetsofagroundsetVissubmodularifitsatisﬁesdiminishingmarginalreturns:forallA⊆B⊆Vande/∈B itholdsthatF(A∪{e})−F(A)≥F(B∪{e})−F(B).Throughoutthispaper wewillassumethatFisnonnegativeandF(∅)=0.Submodularfunctionshaveemergedinareassuchasgametheory[9] graphtheory[10] combinatorialoptimization[11] andmachinelearning[12 13].Castingmachinelearningproblemsassubmodularoptimizationenablestheuseofalgorithmsforsubmodularmaximization[2 8]thatoffertheoreticalworst-caseguaranteesonthequalityofthesolution.Whilethosealgorithmsconferstrongguarantees theirdesignisinherentlyserial limitingtheirusabilityinlarge-scaleproblems.Recentworkhasaddressedfaster[14]andparallel[1 15 16]versionsofthegreedyalgorithmbyNemhauseretal.[8]formaximizingmonotonesubmodularfunctionsthatsatisfyF(A)≤F(B)foranyA⊆B⊆V.However manyimportantapplicationsinmachinelearningleadtonon-monotonesubmodularfunctions.Forexample graphicalmodelinference[5 17] ortradingoffanysubmodulargainmaximizationwithcosts(functionsoftheformF(S)=G(S)−λM(S) whereG(S)ismonotonesubmodularandM(S)alinear(modular)costfunction) suchasforutility-privacytradeoffs[18] requiremaximizingnon-monotonesubmodularfunctions.Fornon-monotonefunctions thesimplegreedyalgorithmin[8]canperformarbitrarilypoorly(seeAppendixH.1foranexample).Intuitively theintroductionofadditionalelementswithmonotonesubmodularfunctionsneverdecreasestheobjectivewhileintroducingelementswithnon-monotonesubmodularfunctionscandecreasetheobjectivetoitsminimum.Fornon-monotonefunctions Buchbinderetal.[2]recentlyproposedanoptimaldoublegreedyalgorithmthatworkswellinaserialsetting.Inthispaper westudyparallelizationsofthisalgorithm.Theserialdoublegreedyalgorithm.TheserialdoublegreedyalgorithmofBuchbinderetal.[2](Ser-2g inAlg.3)maintainstwosetsAi⊆Bi.Initially A0=∅andB0=V.Initerationi thesetAi−1containstheitemsselectedbeforeitem/iterationi andBi−1containsAiandtheitemsthataresofarundecided.ThealgorithmseriallypassesthroughtheitemsinVanddeterminesonlinewhethertokeepitemi(addtoAi)ordiscardit(removefromBi) basedonathresholdthattradesoffthegain∆+(i)=F(Ai−1∪i)−F(Ai−1)ofaddingitothecurrentlyselectedsetAi−1 andthegain∆−(i)=F(Bi−1\i)−F(Bi−1)ofremovingifromthecandidateset estimatingitscomplementaritytootherremainingelements.Foranyelementordering thisalgorithmachievesatight1/2-approximationinexpectation.3ConcurrencyPatternsforParallelMachineLearningInthispaperweadoptatransactionalviewoftheprogramstateandexploreparallelizationstrategiesthroughthelensofparalleltransactionprocessingsystems.Werecasttheprogramstate(thesetsAandB)asdata andtheoperations(addingelementstoAandremovingelementsfromB)as2transactions.Morepreciselywereformulatethedoublegreedyalgorithm(Alg.3)asaseriesofexchangeable Read-Writetransactionsoftheform:Te(A B) ((A∪e B)ifue≤[∆+(A e)]+[∆+(A e)]++[∆−(B e)]+(A B\e)otherwise.(1)ThetransactionTeisafunctionfromthesetsAandBtonewsetsAandBbasedontheelemente∈Vandthepredeterminedrandombitsueforthatelement.BycomposingthetransactionsTn(Tn−1(...T1(∅ V)))werecovertheserialdouble-greedyalgo-rithmdeﬁnedinAlg.3.Infact anyorderingoftheserialcompositionofthetransactionsrecoversapermutedexecutionofAlg.3andthereforetheoptimalapproximationalgorithm.However thisraisesthequestion:isitpossibletoapplytransactionsinparallel?IfweexecutetransactionsTiandTj withi6=j inparallelweneedamethodtomergetheresultingprogramstates.Inthecontextofthedoublegreedyalgorithm wecoulddeﬁnetheparallelexecutionoftwotransactionsas:Ti(A B)+Tj(A B) (Ti(A B)A∪Tj(A B)A Ti(A B)B∩Tj(A B)B) (2)theunionoftheresultingAandtheintersectionoftheresultingB.WhilewecaneasilygeneralizeEq.(2)tomanyparalleltransactions wecannotalwaysguaranteethattheresultwillcorrespondtoaserialcompositionoftransactions.Asaconsequence wecannotdirectlyapplytheanalysisofBuchbinderetal.[2]toderivestrongapproximationguaranteesfortheparallelexecution.Fortunately severaldecadesofresearch[19 20]indatabasesystemshaveexploredefﬁcientparalleltransactionprocessing.Inthispaperweadoptacoordinatedboundsapproachtoparalleltransactionprocessinginwhichparalleltransactionsareconstructedunderboundsonthepossibleprogramstate.Ifthetransactioncouldviolatetheboundthenitisprocessedseriallyontheserver.Byadjustingthedeﬁnitionoftheboundwecanspanaspaceofcoordination-freetoserializableexecutions.Algorithm1:Generalizedtransactions1forp∈{1 ... P}doinparallel2while∃elementtoprocessdo3e=nextelementtoprocess4(ge i)=requestGuarantee(e)5∂i=propose(e ge)6commit(e i ∂i)//Non-blockingAlgorithm2:Committransactioni1waituntil∀j<i processed(j)=true2Atomically3if∂i=FAILthen//Deferredproposal4∂i=propose(e S)//Advancetheprogramstate5S←∂i(S)Figure1:Algorithmforgeneralizedtransactions.Eachtransactionrequestsitspositioniinthecommitordering aswellastheboundsgethatareguaranteedtoholdwhenitcommits.Transactionsarealsoguaranteedtobecommittedaccordingtothegivenordering.InFig.1wedescribethecoordinatedboundstransactionpattern.Theclients(Alg.1) inparallel constructandcommittransactionsunderboundedassumptionsabouttheprogramstateS(i.e. thesetsAandB).TransactionsareconstructedbyrequestingthelatestboundgeonSatlogicaltimeiandcomputingachange∂itoS(e.g. AddetoA).Iftheboundisinsufﬁcienttoconstructthetransactionthen∂i=FAILisreturned.Theclientthensendstheproposedchange∂itotheservertobecommittedatomicallyandproceedstothenextelementwithoutwaitingforaresponse.Theserver(Alg.2)seriallyappliesthetransactionsadvancingtheprogramstate(i.e. addingelementstoAorremovingelementsfromB).Iftheboundswereinsufﬁcientandthetransactionfailedattheclient(i.e. ∂i=FAIL)thentheserverseriallyreconstructsandappliesthetransactionunderthetrueprogramstate.Moreover theserverisresponsibleforderivingbounds processingtransactionsinthelogicalorderi andproducingtheserializableoutput∂n(∂n−1(...∂1(S))).Thismodelachievesahighdegreeofparallelismwhenthecostofconstructingthetransactiondominatesthecostofapplyingthetransaction.Forexample inthecaseofsubmodularmaximization thecostofconstructingthetransactiondependsonevaluatingthemarginalgainswithrespecttochangesinAandBwhilethecostofapplyingthetransactionreducestosettingabit.Itisalsoessentialthatonlyafewtransactionsfailattheclient.Indeed theanalysisofthesesystemsfocusesonensuringthatthemajorityofthetransactionssucceed.3Algorithm3:Ser-2g:serialdoublegreedy1A0=∅ B0=V2fori=1tondo3∆+(i)=F(Ai−1∪i)−F(Ai−1)4∆−(i)=F(Bi−1\i)−F(Bi−1)5Drawui∼Unif(0 1)6ifui<[∆+(i)]+[∆+(i)]++[∆−(i)]+then7Ai:=Ai−1∪i;Bi:=Bi−18elseAi:=Ai−1;Bi:=Bi−1\iAlgorithm4:CF-2g:coord-freedoublegreedy1bA=∅ bB=V2forp∈{1 ... P}doinparallel3while∃elementtoprocessdo4e=nextelementtoprocess5bAe=bA;bBe=bB6∆max+(e)=F(bAe∪e)−F(bAe)7∆max−(e)=F(bBe\e)−F(bBe)8Drawue∼Unif(0 1)9ifue<[∆max+(e)]+[∆max+(e)]++[∆max−(e)]+then10bA(e)←111elsebB(e)←0Algorithm5:CC-2g:concurrencycontrol1bA=eA=∅ bB=eB=V2fori=1 ... |V|doprocessed(i)=false3ι=04forp∈{1 ... P}doinparallel5while∃elementtoprocessdo6e=nextelementtoprocess7(bAe eAe bBe eBe i)=getGuarantee(e)8(result ue)=propose(e bAe eAe bBe eBe)9commit(e i ue result)Algorithm6:CC-2ggetGuarantee(e)1eA(e)←1;eB(e)←02i=ι;ι←ι+13bAe=bA;bBe=bB4eAe=eA;eBe=eB5return(bAe eAe bBe eBe i)Algorithm7:CC-2gpropose1∆min+(e)=F(eAe)−F(eAe\e)2∆max+(e)=F(bAe∪e)−F(bAe)3∆min−(e)=F(eBe)−F(eBe∪e)4∆max−(e)=F(bBe\e)−F(bBe)5Drawue∼Unif(0 1)6ifue<[∆min+(e)]+[∆min+(e)]++[∆max−(e)]+then7result←18elseifue>[∆max+(e)]+[∆max+(e)]++[∆min−(e)]+then9result←−110elseresult←FAIL11return(result ue)Algorithm8:CC-2g:commit(e i ue result)1waituntil∀j<i processed(j)=true2ifresult=FAILthen3∆exact+(e)=F(bA∪e)−F(bA)4∆exact−(e)=F(bB\e)−F(bB)5ifue<[∆exact+(e)]+[∆exact+(e)]++[∆exact−(e)]+thenresult←16elseresult←−17ifresult=1thenbA(e)←1;eB(e)←18elseeA(e)←0;bB(e)←09processed(i)=true4Coordination-FreeDoubleGreedyAlgorithmThecoordination-freeapproachattemptstoreducetheneedtocoordinateguaranteesandthelogicalordering.Thisisachievedbyoperatingonpotentiallystalestates:thetransactionguaranteereducestorequiringgebeastaleversionofS andthelogicalorderingisimplicitlydeﬁnedbythetimeofcommit.Inusingtheseweakguarantees CF-2gisoverlyoptimisticallyassumingthatconcurrenttransactionsareindependent whichcouldpotentiallyleadtoerroneousdecisions.Alg.4isthecoordination-freeparalleldoublegreedyalgorithm.1CF-2gcloselyresemblestheserialSer-2g buttheelementse∈Varenolongerprocessedinaﬁxedorder.Thus thesetsA Barereplacedbypotentiallystalelocalestimates(bounds)bA bB wherebAisasubsetofthetrueAandbBisasupersetoftheactualBoneachiteration.Theseboundingsetsallowustocomputebounds∆max+ ∆max−whichapproximate∆+ ∆−fromtheserialalgorithm.Wenowformalizethisidea.ToanalyzetheCF-2galgorithmweordertheelementse∈Vaccordingtothecommittime(i.e. whenAlg.4line8isexecuted).Letι(e)bethepositionofeinthistotalorderingonelements.This1Wepresentonlytheparallelizedprobabilisticversionsof[2].Bothparallelalgorithmscanbeeasilyextendedtothedeterministicversionof[2];CF-2gcanalsobeextendedtothemultilinearversionof[2].4ui Add A!Rem. B!0 1 162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215Algorithm3:Seq-2g:Sequentialdoublegreedy1A0=; B0=V2fori=1tondo3+(i)=F(Ai1[i)F(Ai1)4(i)=F(Bi1\i)F(Bi1)5Drawui⇠Unif(0 1)6ifui<[+(i)]+[+(i)]++[(i)]+then7Ai:=Ai1[i;Bi:=Bi18elseAi:=Ai1;Bi:=Bi1\iAlgorithm4:CF-2g:coord-freedoublegreedy1ˆA=; ˆB=V2forp2{1 ... P}doinparallel3while9elementtoprocessdo4e=nextelementtoprocess5max+(e)=F(ˆA[e)F(ˆA)6max(e)=F(ˆB\e)F(ˆB)7Drawue⇠Unif(0 1)8ifue<[max+(e)]+[max+(e)]++[max(e)]+then9ˆA(e) 110elseˆB(e) 0Algorithm5:CC-2g:concurrencycontrol1ˆA=˜A=; ˆB=˜B=V2fori=1 ... |V|doprocessed(i)=false3◆=04forp2{1 ... P}doinparallel5while9elementtoprocessdo6e=nextelementtoprocess7(ˆAe ˜Ae ˆBe ˜Be i)=getGuarantee(e)8(result ue)=propose(e ˆAe ˜Ae ˆBe ˜Be)9commit(e i ue result)Algorithm6:CC-2ggetGuarantee(e)1˜A(e) 1;˜B(e) 02i=◆;◆ ◆+13ˆAe=ˆA;ˆBe=ˆB4˜Ae=˜A;˜Be=˜B5return(ˆAe ˜Ae ˆBe ˜Be i)Algorithm7:CC-2gpropose1min+(e)=F(˜Ae)F(˜Ae\e)2max+(e)=F(ˆAe[e)F(ˆAe)3min(e)=F(˜Be)F(˜Be[e)4max(e)=F(ˆBe\e)F(ˆBe)5Drawue⇠Unif(0 1)6ifue<[min+(e)]+[min+(e)]++[max(e)]+then7result 18elseifue>[max+(e)]+[max+(e)]++[min(e)]+then9result 110elseresult fail11return(result ue)Algorithm8:CC-2g:commit(e i ue result)1waituntil8j<i processed(j)=true2ifresult=failthen3exact+(e)=F(ˆA[e)F(ˆA)4exact(e)=F(ˆB\e)F(ˆB)5ifue<[exact+(e)]+[exact+(e)]++[exact(e)]+thenresult 16elseresult 17ifresult=1thenˆA(e) 1;˜B(e) 18else˜A(e) 0;ˆB(e) 09processed(i)=true(a)(b)(c)4CoordinationFreeDoubleGreedyAlgorithmThecoordination-freeapproachattemptstoreducetheneedtocoordinateguaranteesandlogicalordering.Thisisachievedbyoperatingonpotentiallystalestates–theguaranteereducestorequiringgebeastaleversionofS andlogicalorderingisimplicitlydeﬁnedbythetimeofcommit.Inusingtheseweakguarantees CF-2gisoverlyoptimisticallyassumingthatconcurrenttransactionsareindependent whichcouldpotentiallyleadtoerroneousdecisions.Alg.4isthecoordinationfreeparalleldoublegreedyalgorithm.1CF-2gcloselyresemblestheserialSeq-2g buttheelementse2Varenolongerprocessedinaﬁxedorder.Thus thesetsA Barereplacedbypotentiallystale“bounds”ˆA ˆB whereˆAisasubsetofthe“true”AandˆBisasuperset1Wepresentonlytheparallelizedprobabilisticversionsof[1].Bothparallelalgorithmscanbeeasilyextendedtothedeterministicversionof[1];CF-2gcanalsobeextendedtothemultilinearversionof[1].4(a)Ser-2gue Add A!Rem. B!0 1 162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215Algorithm3:Seq-2g:Sequentialdoublegreedy1A0=; B0=V2fori=1tondo3+(i)=F(Ai1[i)F(Ai1)4(i)=F(Bi1\i)F(Bi1)5Drawui⇠Unif(0 1)6ifui<[+(i)]+[+(i)]++[(i)]+then7Ai:=Ai1[i;Bi:=Bi18elseAi:=Ai1;Bi:=Bi1\iAlgorithm4:CF-2g:coord-freedoublegreedy1ˆA=; ˆB=V2forp2{1 ... P}doinparallel3while9elementtoprocessdo4e=nextelementtoprocess5max+(e)=F(ˆA[e)F(ˆA)6max(e)=F(ˆB\e)F(ˆB)7Drawue⇠Unif(0 1)8ifue<[max+(e)]+[max+(e)]++[max(e)]+then9ˆA(e) 110elseˆB(e) 0Algorithm5:CC-2g:concurrencycontrol1ˆA=˜A=; ˆB=˜B=V2fori=1 ... |V|doprocessed(i)=false3◆=04forp2{1 ... P}doinparallel5while9elementtoprocessdo6e=nextelementtoprocess7(ˆAe ˜Ae ˆBe ˜Be i)=getGuarantee(e)8(result ue)=propose(e ˆAe ˜Ae ˆBe ˜Be)9commit(e i ue result)Algorithm6:CC-2ggetGuarantee(e)1˜A(e) 1;˜B(e) 02i=◆;◆ ◆+13ˆAe=ˆA;ˆBe=ˆB4˜Ae=˜A;˜Be=˜B5return(ˆAe ˜Ae ˆBe ˜Be i)Algorithm7:CC-2gpropose1min+(e)=F(˜Ae)F(˜Ae\e)2max+(e)=F(ˆAe[e)F(ˆAe)3min(e)=F(˜Be)F(˜Be[e)4max(e)=F(ˆBe\e)F(ˆBe)5Drawue⇠Unif(0 1)6ifue<[min+(e)]+[min+(e)]++[max(e)]+then7result 18elseifue>[max+(e)]+[max+(e)]++[min(e)]+then9result 110elseresult fail11return(result ue)Algorithm8:CC-2g:commit(e i ue result)1waituntil8j<i processed(j)=true2ifresult=failthen3exact+(e)=F(ˆA[e)F(ˆA)4exact(e)=F(ˆB\e)F(ˆB)5ifue<[exact+(e)]+[exact+(e)]++[exact(e)]+thenresult 16elseresult 17ifresult=1thenˆA(e) 1;˜B(e) 18else˜A(e) 0;ˆB(e) 09processed(i)=true(a)(b)(c)4CoordinationFreeDoubleGreedyAlgorithmThecoordination-freeapproachattemptstoreducetheneedtocoordinateguaranteesandlogicalordering.Thisisachievedbyoperatingonpotentiallystalestates–theguaranteereducestorequiringgebeastaleversionofS andlogicalorderingisimplicitlydeﬁnedbythetimeofcommit.Inusingtheseweakguarantees CF-2gisoverlyoptimisticallyassumingthatconcurrenttransactionsareindependent whichcouldpotentiallyleadtoerroneousdecisions.Alg.4isthecoordinationfreeparalleldoublegreedyalgorithm.1CF-2gcloselyresemblestheserialSeq-2g buttheelementse2Varenolongerprocessedinaﬁxedorder.Thus thesetsA Barereplacedbypotentiallystale“bounds”ˆA ˆB whereˆAisasubsetofthe“true”AandˆBisasuperset1Wepresentonlytheparallelizedprobabilisticversionsof[1].Bothparallelalgorithmscanbeeasilyextendedtothedeterministicversionof[1];CF-2gcanalsobeextendedtothemultilinearversionof[1].4162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215Algorithm3:Ser-2g:serialdoublegreedy1A0=; B0=V2fori=1tondo3+(i)=F(Ai1[i)F(Ai1)4(i)=F(Bi1\i)F(Bi1)5Drawui⇠Unif(0 1)6ifui<[+(e)]+[+(e)]++[(e)]+then78Ai:=Ai1[i;Bi:=Bi19elseAi:=Ai1;Bi:=Bi1\iAlgorithm4:CF-2g:coord-freedoublegreedy1ˆA=; ˆB=V2forp2{1 ... P}doinparallel3while9elementtoprocessdo4e=nextelementtoprocess5ˆAe=ˆA;ˆBe=ˆB6max+(e)=F(ˆAe[e)F(ˆAe)7max(e)=F(ˆBe\e)F(ˆBe)8Drawue⇠Unif(0 1)9ifue<[max+(e)]+[max+(e)]++[max(e)]+then10ˆA(e) 111elseˆB(e) 0Algorithm5:CC-2g:concurrencycontrol1ˆA=˜A=; ˆB=˜B=V2fori=1 ... |V|doprocessed(i)=false3◆=04forp2{1 ... P}doinparallel5while9elementtoprocessdo6e=nextelementtoprocess7(ˆAe ˜Ae ˆBe ˜Be i)=getGuarantee(e)8(result ue)=propose(e ˆAe ˜Ae ˆBe ˜Be)9commit(e i ue result)Algorithm6:CC-2ggetGuarantee(e)1˜A(e) 1;˜B(e) 02i=◆;◆ ◆+13ˆAe=ˆA;ˆBe=ˆB4˜Ae=˜A;˜Be=˜B5return(ˆAe ˜Ae ˆBe ˜Be i)Algorithm7:CC-2gpropose1min+(e)=F(˜Ae)F(˜Ae\e)2max+(e)=F(ˆAe[e)F(ˆAe)3min(e)=F(˜Be)F(˜Be[e)4max(e)=F(ˆBe\e)F(ˆBe)5Drawue⇠Unif(0 1)6ifue<[min+(e)]+[min+(e)]++[max(e)]+then7result 18elseifue>[max+(e)]+[max+(e)]++[min(e)]+then9result 110elseresult FAIL11return(result ue)Algorithm8:CC-2g:commit(e i ue result)1waituntil8j<i processed(j)=true2ifresult=FAILthen3exact+(e)=F(ˆA[e)F(ˆA)4exact(e)=F(ˆB\e)F(ˆB)5ifue<[exact+(e)]+[exact+(e)]++[exact(e)]+thenresult 16elseresult 17ifresult=1thenˆA(e) 1;˜B(e) 18else˜A(e) 0;ˆB(e) 09processed(i)=true4Coordination-FreeDoubleGreedyAlgorithmThecoordination-freeapproachattemptstoreducetheneedtocoordinateguaranteesandthelogicalordering.Thisisachievedbyoperatingonpotentiallystalestates:thetransactionguaranteereducestorequiringgebeastaleversionofS andthelogicalorderingisimplicitlydeﬁnedbythetimeofcommit.Inusingtheseweakguarantees CF-2gisoverlyoptimisticallyassumingthatconcurrenttransactionsareindependent whichcouldpotentiallyleadtoerroneousdecisions.Alg.4isthecoordination-freeparalleldoublegreedyalgorithm.1CF-2gcloselyresemblestheserialSer-2g buttheelementse2Varenolongerprocessedinaﬁxedorder.Thus thesetsA Barereplacedbypotentiallystalelocalestimates(bounds)ˆA ˆB whereˆAisasubsetofthetrueAandˆBisasupersetoftheactualBoneachiteration.Theseboundingsetsallowustocomputeboundsmax+ maxwhichapproximate+ fromtheserialalgorithm.Wenowformalizethisidea.1Wepresentonlytheparallelizedprobabilisticversionsof[2].Bothparallelalgorithmscanbeeasilyextendedtothedeterministicversionof[2];CF-2gcanalsobeextendedtothemultilinearversionof[2].4(b)CF-2gue Add A!Rem. B!0 1 Uncertainty !162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215Algorithm3:Seq-2g:Sequentialdoublegreedy1A0=; B0=V2fori=1tondo3+(i)=F(Ai1[i)F(Ai1)4(i)=F(Bi1\i)F(Bi1)5Drawui⇠Unif(0 1)6ifui<[+(i)]+[+(i)]++[(i)]+then7Ai:=Ai1[i;Bi:=Bi18elseAi:=Ai1;Bi:=Bi1\iAlgorithm4:CF-2g:coord-freedoublegreedy1ˆA=; ˆB=V2forp2{1 ... P}doinparallel3while9elementtoprocessdo4e=nextelementtoprocess5max+(e)=F(ˆA[e)F(ˆA)6max(e)=F(ˆB\e)F(ˆB)7Drawue⇠Unif(0 1)8ifue<[max+(e)]+[max+(e)]++[max(e)]+then9ˆA(e) 110elseˆB(e) 0Algorithm5:CC-2g:concurrencycontrol1ˆA=˜A=; ˆB=˜B=V2fori=1 ... |V|doprocessed(i)=false3◆=04forp2{1 ... P}doinparallel5while9elementtoprocessdo6e=nextelementtoprocess7(ˆAe ˜Ae ˆBe ˜Be i)=getGuarantee(e)8(result ue)=propose(e ˆAe ˜Ae ˆBe ˜Be)9commit(e i ue result)Algorithm6:CC-2ggetGuarantee(e)1˜A(e) 1;˜B(e) 02i=◆;◆ ◆+13ˆAe=ˆA;ˆBe=ˆB4˜Ae=˜A;˜Be=˜B5return(ˆAe ˜Ae ˆBe ˜Be i)Algorithm7:CC-2gpropose1min+(e)=F(˜Ae)F(˜Ae\e)2max+(e)=F(ˆAe[e)F(ˆAe)3min(e)=F(˜Be)F(˜Be[e)4max(e)=F(ˆBe\e)F(ˆBe)5Drawue⇠Unif(0 1)6ifue<[min+(e)]+[min+(e)]++[max(e)]+then7result 18elseifue>[max+(e)]+[max+(e)]++[min(e)]+then9result 110elseresult fail11return(result ue)Algorithm8:CC-2g:commit(e i ue result)1waituntil8j<i processed(j)=true2ifresult=failthen3exact+(e)=F(ˆA[e)F(ˆA)4exact(e)=F(ˆB\e)F(ˆB)5ifue<[exact+(e)]+[exact+(e)]++[exact(e)]+thenresult 16elseresult 17ifresult=1thenˆA(e) 1;˜B(e) 18else˜A(e) 0;ˆB(e) 09processed(i)=true(a)(b)(c)4CoordinationFreeDoubleGreedyAlgorithmThecoordination-freeapproachattemptstoreducetheneedtocoordinateguaranteesandlogicalordering.Thisisachievedbyoperatingonpotentiallystalestates–theguaranteereducestorequiringgebeastaleversionofS andlogicalorderingisimplicitlydeﬁnedbythetimeofcommit.Inusingtheseweakguarantees CF-2gisoverlyoptimisticallyassumingthatconcurrenttransactionsareindependent whichcouldpotentiallyleadtoerroneousdecisions.Alg.4isthecoordinationfreeparalleldoublegreedyalgorithm.1CF-2gcloselyresemblestheserialSeq-2g buttheelementse2Varenolongerprocessedinaﬁxedorder.Thus thesetsA Barereplacedbypotentiallystale“bounds”ˆA ˆB whereˆAisasubsetofthe“true”AandˆBisasuperset1Wepresentonlytheparallelizedprobabilisticversionsof[1].Bothparallelalgorithmscanbeeasilyextendedtothedeterministicversionof[1];CF-2gcanalsobeextendedtothemultilinearversionof[1].4162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215Algorithm3:Seq-2g:Sequentialdoublegreedy1A0=; B0=V2fori=1tondo3+(i)=F(Ai1[i)F(Ai1)4(i)=F(Bi1\i)F(Bi1)5Drawui⇠Unif(0 1)6ifui<[+(i)]+[+(i)]++[(i)]+then7Ai:=Ai1[i;Bi:=Bi18elseAi:=Ai1;Bi:=Bi1\iAlgorithm4:CF-2g:coord-freedoublegreedy1ˆA=; ˆB=V2forp2{1 ... P}doinparallel3while9elementtoprocessdo4e=nextelementtoprocess5max+(e)=F(ˆA[e)F(ˆA)6max(e)=F(ˆB\e)F(ˆB)7Drawue⇠Unif(0 1)8ifue<[max+(e)]+[max+(e)]++[max(e)]+then9ˆA(e) 110elseˆB(e) 0Algorithm5:CC-2g:concurrencycontrol1ˆA=˜A=; ˆB=˜B=V2fori=1 ... |V|doprocessed(i)=false3◆=04forp2{1 ... P}doinparallel5while9elementtoprocessdo6e=nextelementtoprocess7(ˆAe ˜Ae ˆBe ˜Be i)=getGuarantee(e)8(result ue)=propose(e ˆAe ˜Ae ˆBe ˜Be)9commit(e i ue result)Algorithm6:CC-2ggetGuarantee(e)1˜A(e) 1;˜B(e) 02i=◆;◆ ◆+13ˆAe=ˆA;ˆBe=ˆB4˜Ae=˜A;˜Be=˜B5return(ˆAe ˜Ae ˆBe ˜Be i)Algorithm7:CC-2gpropose1min+(e)=F(˜Ae)F(˜Ae\e)2max+(e)=F(ˆAe[e)F(ˆAe)3min(e)=F(˜Be)F(˜Be[e)4max(e)=F(ˆBe\e)F(ˆBe)5Drawue⇠Unif(0 1)6ifue<[min+(e)]+[min+(e)]++[max(e)]+then7result 18elseifue>[max+(e)]+[max+(e)]++[min(e)]+then9result 110elseresult fail11return(result ue)Algorithm8:CC-2g:commit(e i ue result)1waituntil8j<i processed(j)=true2ifresult=failthen3exact+(e)=F(ˆA[e)F(ˆA)4exact(e)=F(ˆB\e)F(ˆB)5ifue<[exact+(e)]+[exact+(e)]++[exact(e)]+thenresult 16elseresult 17ifresult=1thenˆA(e) 1;˜B(e) 18else˜A(e) 0;ˆB(e) 09processed(i)=true(a)(b)(c)4CoordinationFreeDoubleGreedyAlgorithmThecoordination-freeapproachattemptstoreducetheneedtocoordinateguaranteesandlogicalordering.Thisisachievedbyoperatingonpotentiallystalestates–theguaranteereducestorequiringgebeastaleversionofS andlogicalorderingisimplicitlydeﬁnedbythetimeofcommit.Inusingtheseweakguarantees CF-2gisoverlyoptimisticallyassumingthatconcurrenttransactionsareindependent whichcouldpotentiallyleadtoerroneousdecisions.Alg.4isthecoordinationfreeparalleldoublegreedyalgorithm.1CF-2gcloselyresemblestheserialSeq-2g buttheelementse2Varenolongerprocessedinaﬁxedorder.Thus thesetsA Barereplacedbypotentiallystale“bounds”ˆA ˆB whereˆAisasubsetofthe“true”AandˆBisasuperset1Wepresentonlytheparallelizedprobabilisticversionsof[1].Bothparallelalgorithmscanbeeasilyextendedtothedeterministicversionof[1];CF-2gcanalsobeextendedtothemultilinearversionof[1].4(c)CC-2gFigure2:Illustrationofalgorithms.(a)Ser-2gcomputesathresholdbasedonthetruevalues∆+ ∆− andchoosesanactionbasedbycomparingauniformrandomuiagainstthethreshold.(b)CF-2gapproximatesthethresholdbasedonstalebA bB possiblychoosingthewrongaction.(c)CC-2gcomputestwothresholdsbasedontheboundsonA B whichdeﬁnesanuncertaintyregionwhereitisnotpossibletochoosethecorrectactionlocally.IftherandomvalueuefallsinsidetheuncertaintyintervalthanthetransactionFAILSandmustberecomputedseriallybytheserver;otherwisethetransactionholdsunderallpossibleglobalstates.orderingallowsustodeﬁnemonotonicallynon-decreasingsetsAi={e0:e0∈A ι(e0)<i}whereAistheﬁnalreturnedset andmonotonicallynon-increasingsetsBi=Ai∪{e0:ι(e0)≥i}.ThesetsAi BiprovideaserializationagainstwhichwecancompareCF-2g;inthisserialization Alg.3computes∆+(e)=F(Aι(e)−1∪e)−F(Aι(e)−1)and∆−(e)=F(Bι(e)−1\e)−F(Bι(e)−1).Ontheotherhand CF-2gusesstaleversions2bAe bBe:Alg.4computes∆max+(e)=F(bAe∪e)−F(bAe)and∆max−(e)=F(bBe\e)−F(bBe).ThenextlemmashowsthatbAe bBeareboundingsetsfortheserialization’ssetsAι(e)−1 Bι(e)−1.Intuitively theboundsholdbecausebAe bBearestaleversionsofAι(e)−1 Bι(e)−1 whicharemonotonicallynon-decreasingandnon-increasingsets.AppendixAgivesadetailedproof.Lemma4.1.InCF-2g foranye∈V bAe⊆Aι(e)−1 andbBe⊇Bι(e)−1.Corollary4.2.SubmodularityofFimpliesforCF-2g∆+(e)≤∆max+(e) and∆−(e)≤∆max−(e).TheerrorinCF-2gdependsonthetightnessoftheboundsinCor.4.2.WeanalyzethisinSec.6.1.5ConcurrencyControlfortheDoubleGreedyAlgorithmTheconcurrencycontrol-baseddoublegreedyalgorithm1 CC-2g ispresentedinAlg.5 andcloselyfollowsthemeta-algorithmofAlg.1andAlg.2.UnlikeinCF-2g theconcurrencycontrolmecha-nismsofCC-2gensurethatconcurrenttransactionsareserializedwhentheyarenotindependent.SerializabilityisachievedbymaintainingsetsbA eA bB eB whichserveasupperandlowerboundsonthetruestateofAandBatcommittime.Eachthreadcandeterminelocallyifadecisiontoincludeorexcludeanelementcanbetakensafely.Otherwise theproposalisdeferredtothecommitprocess(Alg.8)whichwaitsuntilitiscertainaboutAandBbeforeproceeding.Thecommitorderisgivenbyι(e) whichisthevalueofιinline2ofAlg.5.WedeﬁneAι(e)−1 Bι(e)−1asbeforewithCF-2g.Additionally letbAe bBe eAe andeBebethesetsthatarereturnedbyAlg.6.2Indeed thesesetsareguaranteedtobeboundsonAι(e)−1 Bι(e)−1:Lemma5.1.InCC-2g ∀e∈V bAe⊆Aι(e)−1⊆eAe\e andbBe⊇Bι(e)−1⊇eBe∪e.Intuitively theseboundsaremaintainedbyrecordingpotentialeffectsofconcurrenttransactionsineA eB andonlyrecordingtheactualeffectsinbA bB;weleavethefullprooftoAppendixA.Furthermore bycommittingtransactionsinorderι wehavebA=Aι(e)−1andbB=Bι(e)−1duringcommit.Lemma5.2.InCC-2g whencommittingelemente wehavebA=Aι(e)−1andbB=Bι(e)−1.2Forclarity wepresentthealgorithmascreatingacopyofbA bB eA andeBforeachelement.Inpractice itismoreefﬁcienttoupdateandaccesstheminsharedmemory.Nevertheless ourtheoremsholdforbothsettings.5Corollary5.3.SubmodularityofFimpliesthatthe∆’scomputedbyCC-2gsatisfy∆min+(e)≤∆exact+(e)=∆+(e)≤∆max+(e)and∆min−(e)≤∆exact−(e)=∆−(e)≤∆max−(e).Byusingthesebounds CC-2gcandeterminewhenitissafetoconstructthetransactionlocally.Forfailedtransactions theserverisabletoconstructthecorrecttransactionusingthetrueprogramstate.AsaconsequencewecanguaranteethattheparallelexecutionofCC-2gisserializable.6AnalysisofAlgorithmsOurtwoalgorithmstradeoffperformanceandstrongapproximationguarantees.TheCF-2galgo-rithmemphasizesspeedattheexpenseoftheapproximationobjective.Ontheotherhand CC-2gemphasizesthetight1/2-approximationattheexpenseofincreasedcoordination.Inthissectionwecharacterizethereductionintheapproximationobjectiveaswellastheincreasedcoordina-tion.OuranalysisconnectsthedegradationinCC-2gscalabilitywiththedegradationintheCF-2gapproximationfactorviathemaximuminter-processormessagedelayτ.6.1ApproximationofCF-2gdoublegreedyTheorem6.1.LetFbeanon-negativesubmodularfunction.CF-2gsolvestheunconstrainedproblemmaxA⊂VF(A)withworst-caseapproximationfactorE[F(ACF)]≥12F∗−14PNi=1E[ρi] whereACFistheoutputofthealgorithm F∗istheoptimalvalue andρi=max{∆max+(e)−∆+(e) ∆max−(e)−∆−(e)}isthemaximumdiscrepancyinthemarginalgainduetothebounds.Theproof(AppendixC)ofThm.6.1followsthestructurein[2].Thm.6.1capturesthedeviationfromoptimalityasafunctionofwidthoftheboundswhichwecharacterizefortwocommonapplications.Example:maxgraphcut.Forthemaxcutobjectiveweboundtheexpecteddiscrepancyinthemarginalgainρiintermsofthesparsityofthegraphandthemaximuminter-processormessagedelayτ.ByapplyingThm.6.1weobtaintheapproximationfactorE[F(AN)]≥12F∗−τ#edges2Nwhichdecreaseslinearlyinboththemessagedelaysandgraphdensity.Inacompletegraph F∗=12#edges soE[F(AN)]≥F∗(cid:0)12−τN(cid:1) whichmakesitpossibletoscaleτlinearlywithNwhileretainingthesameapproximationfactor.Example:setcover.Considerthesimplesetcoverfunction F(A)=PLl=1min(1 |A∩Sl|)−λ|A|=|{l:A∩Sl6=∅}|−λ|A| with0<λ≤1.Weassumethatthereissomeboundeddelayτ.SupposealsotheSl’sformapartition soeachelementebelongstoexactlyoneset.Then PeE[ρe]≥τ+L(1−λτ) whichislinearinτbutindependentofN.6.2CorrectnessofCC-2gTheorem6.2.CC-2gisserializableandthereforesolvestheunconstrainedsubmodularmaximizationproblemmaxA⊂VF(A)withapproximationE[F(ACC)]≥12F∗ whereACCistheoutputofthealgorithm andF∗istheoptimalvalue.Thekeychallengeintheproof(AppendixB)ofThm.6.2istodemonstratethatCC-2gguaranteesaserializableexecution.ItsufﬁcestoshowthatCC-2gtakesthesamedecisionasSer-2gforeachelement–locallyifitissafetodoso andotherwisedeferringthecomputationtotheserver.Asanimmediateconsequenceofserializability werecovertheoptimalapproximationguaranteesoftheserialSer-2galgorithm.6.3ScalabilityofCC-2gWheneveratransactionisreconstructedontheserver theserverneedstowaitforallearlierelementstobecommitted andisalsoblockedfromcommittingalllaterelements.Eachfailedtransactioneffectivelyconstitutesabarriertotheparallelprocessing.Hence thescalabilityofCC-2gisdependentonthenumberoffailedtransactions.Wecandirectlyboundthenumberoffailedtransactions(detailsinAppendixD)forboththemax-cutandsetcoverexampleproblems.Forthemax-cutproblemwithamaximuminter-processormessage6delayτweobtaintheupperbound2τ#edgesN.Similarlyforsetcovertheexpectednumberoffailedtransactionsisupper-boundedby2τ.Asaconsequence thecoordinationcostsofCC-2ggrowsatthesamerateasthereductioninaccuracyofCF-2g.Moreover theCC-2galgorithmwillslowdowninsettingswheretheCF-2galgorithmproducessub-optimalsolutions.7EvaluationWeimplementedtheparallelandserialdoublegreedyalgorithmsinJava/Scala.ExperimentswereconductedonAmazonEC2usingonecc2.8xlargemachine upto16threads for10repetitions.Wemeasuredtheruntimeandspeedup(ratioofruntimeon1threadtoruntimeonpthreads).ForCF-2g wemeasuredF(ACF)−F(ASer) thedifferencebetweentheobjectivevalueonthesetsreturnedbyCF-2gandSer-2g.WeveriﬁedthecorrectnessofCC-2gbycomparingtheoutputofCC-2gwithSer-2g.WealsomeasuredthefractionoftransactionsthatfailinCC-2g.Ourparallelalgorithmsweretestedonthemaxgraphcutandsetcoverproblemswithtwosyntheticgraphsandthreerealdatasets(Table1).Wefoundthatverticesweretypicallyindexedsuchthatnearbyverticesinthegraphwerealsocloseintheirindices.Toreducethisdependency werandomlypermutedtheorderingofvertices.Graph#vertices#edgesDescriptionErdos-Renyi20 000 000≈2×109Eachedgeisincludedwithprobability5×10−6.ZigZag25 000 0002 025 000 000Expandergraph.The81-regularzig-zagproductbetweentheCayleygraphonZ2500000withgeneratingset{±1 ... ±5} andthecompletegraphK10.Friendster10 000 000625 279 786Subgraphofsocialnetwork.[21]Arabic-200522 744 080631 153 6692005crawlofArabicwebsites[22 23 24].UK-200539 459 925921 345 0782005crawlofthe.ukdomain[22 23 24].IT-200441 291 5941 135 718 9092004crawlofthe.itdomain[22 23 24].Table1:Syntheticandrealgraphsusedintheevaluationofourparallelalgorithms.05101500.511.522.53# threadsRuntime relative to sequentialRuntime  relative to sequential Ser−2gCC−2gCF−2g(a)051015051015# threadsSpeedupSpeedup for Max Graph Cut IdealCC−2g  IT−2004CF−2g  IT−2004CC−2g  ZigZagCF−2g  ZigZag(b)051015051015# threadsSpeedupSpeedup for Set Cover IdealCC−2g  IT−2004CF−2g  IT−2004CC−2g  ZigZagCF−2g  ZigZag(c)051015−101234x 10−3# threads% decrease in F(A)CF−2g % Decrease in F(A)Max Graph Cut FriendsterArabic−2005UK−2005IT−2004ZigZagErdos−Renyi(d)05101501234x 10−4# threads% decrease in F(A)CF−2g % Decrease in F(A)Set Cover FriendsterArabic−2005UK−2005IT−2004ZigZagErdos−Renyi(e)05101500.0050.010.015# threads% failed txnsCC−2g % Failed TxnsMax Graph Cut FriendsterArabic−2005UK−2005IT−2004ZigZagErdos−Renyi(f)Figure3:Experimentalresults.Fig.3a–runtimeoftheparallelalgorithmsasaratiotothatoftheserialalgorithm.EachcurveshowstheruntimeofaparallelalgorithmonaparticulargraphforaparticularfunctionF.Fig.3b 3c–speedup(ratioofruntimeononethreadtothatonpthreads).Fig.3d 3e–%differencebetweenobjectivevaluesofSer-2gandCF-2g i.e.[F(ACF)/F(ASer)−1]×100%.Fig.3f–percentageoftransactionsthatfailinCC-2gonthemaxgraphcutproblem.WesummarizeofthekeyresultsherewithmoredetailedexperimentsanddiscussioninAppendixG.Runtime Speedup:Bothparallelalgorithmsarefasterthantheserialalgorithmwiththreeormorethreads andshowgoodspeeduppropertiesasmorethreadsareadded(∼10xormoreforallgraphsandbothfunctions).Objectivevalue:TheobjectivevalueofCF-2gdecreaseswiththenumberofthreads butdiffersfromtheserialobjectivevaluebylessthan0.01%.Failedtransactions:CC-2gfailsmoretransactionsasthreadsareadded butevenwith16threads lessthan0.015%transactionsfail whichhasnegligibleeffectontheruntime/speedup.7051015050100150200250300Runtime on EC2: Ring Set CoverNumber of threadsRuntime / s Ser−2gCC−2gCF−2g(a)051015051015Speed−up on EC2: Ring Set CoverNumber of threadsSpeed−up factor IdealCC−2gCF−2g(b)05101500.20.40.60.81CC−2g: Fraction of txns failedNumber of threadsRing Set Cover 05101500.20.40.60.81CF−2g: Fraction of F(A) decreaseCC−2g: failed txnsCC2F: F(A) decrease(c)Figure4:Experimentalresultsforsetcoverproblemonaringexpandergraphdemonstratingthatforadversari-allyconstructedinputswecanreducetheoptimalityofCF-2gandincreasecoordinationcostsforCC-2g.7.1AdversarialorderingTohighlightthedifferencesinapproachesbetweenthetwoparallelalgorithms weconductedexperimentsonaringCayleyexpandergraphonZ106withgeneratingset{±1 ... ±1000}.Thealgorithmsarepresentedwithanadversarialordering withoutpermutation soverticescloseintheorderingareadjacenttooneanother andtendtobeprocessedconcurrently.ThiscausesCF-2gtomakemoremistakes andCC-2gtofailmoretransactions.Whilemoresophisticatedpartitioningschemescouldimprovescalabilityandeliminatetheeffectofadversarialordering weusethedefaultdatapartitioninginourexperimentstohighlightthedifferencesbetweenthetwoalgorithms.AsFig.4shows CC-2gsacriﬁcesspeedtoensureaserializableexecution eventuallyfailingon>90%oftransactions.Ontheotherhand CF-2gfocusesonspeed resultinginfasterruntime butachievesanobjectivevaluethatis20%ofF(ASer).WeemphasizethatwecontrivedthisexampletohighlightdifferencesbetweenCC-2gandCF-2g andwedonotexpecttoseesuchorderingsinpractice.8RelatedWorkSimilarapproach:Coordination-freesolutionshavebeenproposedforstochasticgradientdescent[25]andcollapsedGibbssampling[26].Moregenerally parameterservers[27 28]applytheCFapproachtolargerclassesofproblems.Panetal.[29]appliedconcurrencycontroltoparallelizesomeunsupervisedlearningalgorithms.Similarproblem:Distributedandparallelgreedysubmodularmaximizationisaddressedin[1 15 16] butonlyformonotonefunctions.9ConclusionandFutureWorkByadoptingthetransactionprocessingmodelfromparalleldatabasesystems wepresentedtwoapproachestoparallelizingthedoublegreedyalgorithmforunconstrainedsubmodularmaximization.WequantiﬁedtheweakerapproximationguaranteeofCF-2gandtheadditionalcoordinationofCC-2g allowingonetotradeoffbetweenperformanceandobjectiveoptimality.Ourevaluationonlargescaledatademonstratesthescalabilityandtradeoffsofthetwoapproaches.Moreover astheapproximationqualityoftheCF-2galgorithmdecreasessodoesthescalabilityoftheCC-2galgorithm.Thechoicebetweenthealgorithmthenreducestoachoiceofguaranteedperformanceandguaranteedoptimality.Webelievethereareanumberofareasforfuturework.OnecanimagineasystemthatallowsasmoothinterpolationbetweenCF-2gandCC-2g.WhilebothCF-2gandCC-2gcanbeimmediatelyimplementedasdistributedalgorithms highercommunicationcostsanddelaysmayposeadditionalchallenges.Finally otherproblemssuchasconstrainedmaximizationofmonotone/non-monotonefunctionscouldpotentiallybeparallelizedwiththeCFandCCframeworks.Acknowledgments.ThisresearchissupportedinpartbyNSFCISEExpeditionsAwardCCF-1139158 LBNLAward7076018 andDARPAXDataAwardFA8750-12-2-0331 andgiftsfromAmazonWebServices Google SAP TheThomasandStaceySiebelFoundation Adobe Apple Inc. Bosch C3Energy Cisco Cloudera EMC Ericsson Facebook GameOnTalis Guavus HP Huawei Intel Microsoft NetApp Pivotal Splunk Virdata VMware andYahoo!.ThisresearchwasinpartfundedbytheOfﬁceofNavalResearchundercontract/grantnumberN00014-11-1-0688.X.Pan’sworkisalsosupportedbyaDSONationalLaboratoriesPostgraduateScholarship.8References[1]B.Mirzasoleiman A.Karbasi R.Sarkar andA.Krause.Distributedsubmodularmaximization:Identifyingrepresentativeelementsinmassivedata.InAdvancesinNeuralInformationProcessingSystems26.2013.[2]N.Buchbinder M.Feldman J.Naor andR.Schwartz.Atightlineartime(1/2)-approximationforunconstrainedsubmodularmaximization.InFOCS 2012.[3]A.KrauseandC.Guestrin.Submodularityanditsapplicationsinoptimizedinformationgathering:Anintroduction.ACMTransactionsonIntelligentSystemsandTechnology 2(4) 2011.[4]G.Kim E.P.Xing F.Li andT.Kanade.Distributedcosegmentationviasubmodularoptimizationonanisotropicdiffusion.InInt.ConferenceonComputerVision(ICCV) 2011.[5]J.Gillenwater A.Kulesza andB.Taskar.Near-optimalMAPinferencefordeterminantalpointprocesses.InAdvancesinNeuralInformationProcessingSystems(NIPS) 2012.[6]D.Kempe J.Kleinberg andE.Tardos.Maximizingthespreadofinﬂuencethroughasocialnetwork.InACMSIGKDDConferenceonKnowledgeDiscoveryandDataMining(KDD) 2003.[7]H.LinandJ.Bilmes.Aclassofsubmodularfunctionsfordocumentsummarization.InThe49thAnnualMeetingoftheAssociationforComputationalLinguistics:HumanLanguageTechnologies 2011.[8]G.L.Nemhauser L.A.Wolsey andM.L.Fisher.Ananalysisofapproximationsformaximizingsubmodularsetfunctions—I.MathematicalProgramming 14(1):265–294 1978.[9]L.S.Shapley.Coresofconvexgames.InternationalJournalofGameTheory 1(1):11–26 1971.[10]A.Frank.Submodularfunctionsingraphtheory.DiscreteMathematics 111:231–243 1993.[11]A.Schrijver.CombinatorialOptimization–Polyhedraandefﬁciency.Springer 2002.[12]A.KrauseandS.Jegelka.Submodularityinmachinelearning–newdirections.ICMLTutorial 2013.[13]J.Bilmes.Deepmathematicalpropertiesofsubmodularitywithapplicationstomachinelearning.NIPSTutorial 2013.[14]A.BadanidiyuruandJ.Vondr´ak.Fastalgorithmsformaximizingsubmodularfunctions.InSODA 2014.[15]R.Kumar B.Moseley S.Vassilvitskii andA.Vattani.FastgreedyalgorithmsinMapReduceandstreaming.InSPAA 2013.[16]K.Wei R.Iyer andJ.Bilmes.Fastmulti-stagesubmodularmaximization.InInt.ConferenceonMachineLearning(ICML) 2014.[17]C.ReedandZ.Ghahramani.ScalingtheIndianBuffetProcessviasubmodularmaximization.InInt.ConferenceonMachineLearning(ICML) 2013.[18]A.KrauseandE.Horvitz.Autility-theoreticapproachtoprivacyinonlineservices.JAIR 39 2010.[19]M.TamerOzsu.PrinciplesofDistributedDatabaseSystems.PrenticeHallPress UpperSaddleRiver NJ USA 3rdedition 2007.ISBN9780130412126.[20]H.KungandJ.T.Robinson.Onoptimisticmethodsforconcurrencycontrol.TODS 6(2) 1981.[21]J.Leskovec.Stanfordnetworkanalysisproject 2011.URLhttp://snap.stanford.edu/.[22]P.BoldiandS.Vigna.TheWebGraphframeworkI:Compressiontechniques.InWWW 2004.[23]P.Boldi M.Rosa M.Santini andS.Vigna.Layeredlabelpropagation:Amultiresolutioncoordinate-freeorderingforcompressingsocialnetworks.InWWW.ACMPress 2011.[24]P.Boldi B.Codenotti M.Santini andS.Vigna.Ubicrawler:Ascalablefullydistributedwebcrawler.Software:Practice&Experience 34(8):711–726 2004.[25]B.Recht C.Re S.J.Wright andF.Niu.Hogwild:Alock-freeapproachtoparallelizingstochasticgradientdescent.InAdvancesinNeuralInformationProcessingSystems(NIPS)24 Granada 2011.[26]A.Ahmed M.Aly J.Gonzalez S.Narayanamurthy andA.J.Smola.Scalableinferenceinlatentvariablemodels.InProc.ofthe5thACMInternationalConferenceonWebSearchandDataMining 2012.[27]MuLi LiZhou ZichaoYang AaronLi FeiXia DavidGAndersen andAlexanderSmola.Parameterserverfordistributedmachinelearning.InBigLearnworkshop atNIPS LakeTahoe 2013.[28]Q.Ho J.Cipar H.Cui S.Lee J.K.Kim P.B.Gibbons G.A.Gibson G.Ganger andE.Xing.Moreeffectivedistributedmlviaastalesynchronousparallelparameterserver.InNIPS.2013.[29]X.Pan J.E.Gonzalez S.Jegelka T.Broderick andM.I.Jordan.Optimisticconcurrencycontrolfordistributedunsupervisedlearning.InAdvancesinNeuralInformationProcessingSystems26.2013.9,Xinghao Pan
Stefanie Jegelka
Joseph Gonzalez
Joseph Bradley
Michael Jordan